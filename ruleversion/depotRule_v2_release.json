{
    "title": "总仓库",
    "author": "Reborn",
    "version": 27,
    "updateText": "1.‘‘优化’’:规则映射功能支持正则批量映射，模板在开发文档\n2.‘‘新功能’’:支持规则映射功能(即替换规则名跟仓库规则对比)\n3.更多更新日志请点击访问源网页查看",
    "rule": "rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya6aaW6aG16aKR6YGT77yMUmVib3Ju77+laG9tZV9ydWxl77+leyJmaXJzdEhlYWRlciI6ImNsYXNzIiwidGl0bGUiOiLmgLvku5PlupMiLCJhdXRob3IiOiJSZWJvcm4iLCJ1cmwiOiJoaWtlcjovL2hvbWUiLCJ2ZXJzaW9uIjoyNywiY29sX3R5cGUiOiJpY29uXzIiLCJjbGFzc19uYW1lIjoiIiwiY2xhc3NfdXJsIjoiIiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJ5ZWFyX25hbWUiOiIiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcbnZhciBtUnVsZSA9IEpTT04ucGFyc2UoZ2V0UnVsZSgpKTtcblxuLy8g5Zyo6L+Z6YeM5re75Yqg5LuT5bqT6YWN572u77yM5Y+v5L2/5pys5Zyw5re75Yqg55qE5LuT5bqT572u6aG2XG52YXIgYXV0aG9yTGlzdCA9IFtcbiAgICBcIlvkvovlrZBd572u6aG256eB5Lq65LuT5bqTQEBSZWJvcm5fMEBASGlrZXJSdWxlc1ByaXZhY3lAQGFjY2Vzc190b2tlbj0nKioqKidcIixcbiAgICBcIlvkvovlrZBd6Ieq5a6a5LmJ5paH5Lu25ZCNQEBSZWJvcm5fMEBASGlrZXJSdWxlc0RlcG90QEByZW1vdGVGaWxlbmFtZT0ndXBkYXRlXzEuanNvbidcIixcbiAgICAgXCJb5L6L5a2QXemdnueggeS6keS7k+W6k+inhOWImUBAYXBpVHlwZT0nMCdAQGZ1bGxVcmw9J2h0dHBzOi8vZ2l0ZWUuY29tL3FpdXN1bnNoaW5lMjMzL2hpa2VyVmlldy9yYXcvbWFzdGVyL3J1bGV2ZXJzaW9uL1JlYm9ybi91cGRhdGUuanNvbidcIlxuXTtcbnZhciByZW1vdGVBdXRob3JMaXN0VXJsID0gXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9hdXRob3JMaXN0Lmpzb25cIjtcbnZhciByZW1vdGVBdXRob3JMaXN0ID0gW107XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVBdXRob3JMaXN0PVwiICsgZmV0Y2gocmVtb3RlQXV0aG9yTGlzdFVybCwge30pKTtcbn0gY2F0Y2ggKGUpIHtcbn1cbkFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGF1dGhvckxpc3QsIHJlbW90ZUF1dGhvckxpc3QpO1xuLy8g5Zyo6L+Z6YeM5re75Yqg5LuT5bqT6YWN572u77yM5Y+v5L2/5pys5Zyw5re75Yqg55qE5LuT5bqT572u5bqVXG52YXIgYXV0aG9yTGlzdEJvdHRvbSA9IFtcbiAgICBcIlvkvovlrZBd572u5bqV5pys5Zyw5LuT5bqTQEBSZWJvcm5fMEBASGlrZXJSdWxlc1ByaXZhY3lcIlxuXTtcbmlmIChhdXRob3JMaXN0Qm90dG9tLmxlbmd0aCAhPSAwKSBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShhdXRob3JMaXN0LCBhdXRob3JMaXN0Qm90dG9tKTtcblxuLy8g5Zyo6L+Z6YeM5re75Yqg6ZqP5py65aS05YOPXG52YXIgcGljVXJsTGlzdCA9IFtcbiAgICBcImh0dHBzOi8vd3d3LmVhc3lpY29uLm5ldC9hcGkvcmVzaXplQXBpLnBocD9pZD0xMjcxNjI0JnNpemU9MTI4XCIsXG4gICAgXCJodHRwczovL3d3dy5lYXN5aWNvbi5uZXQvYXBpL3Jlc2l6ZUFwaS5waHA/aWQ9MTI3MTY0NyZzaXplPTEyOFwiLFxuICAgIFwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNjY1MzYmc2l6ZT0xMjhcIixcbiAgICBcImh0dHBzOi8vd3d3LmVhc3lpY29uLm5ldC9hcGkvcmVzaXplQXBpLnBocD9pZD0xMjcxNjU1JnNpemU9MTI4XCIsXG5dO1xuXG4vLyDpmpDol4/lvIDlhbPvvIzkuI3pnIDopoHpmpDol4/or7forr7nva7kuLpmYWxzZVxudmFyIG5lZWRIaWRlUnVsZSA9IHRydWU7XG4vLyDoh6rooYzmt7vliqDopoHpmpDol4/nmoTmoIforrDvvIzmoLzlvI/kuLrvvJpb5qCH6K6w5ZCNXVxudmFyIGhpZGVTeW1ib2xzID0gW1wiW+aooeadv11cIiwgXCJb5pyq5a6M5oiQXVwiXTtcblxuLy8g5oC75LuT5bqT5pu05paw5Zyw5Z2AXG52YXIgcmVtb3RlRGVwb3RSdWxlVXJsID0gXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9kZXBvdFJ1bGVfdjJfcmVsZWFzZS5qc29uXCI7XG4vLyDku5PlupPnirbmgIHnvJPlrZjmlofku7blnLDlnYBcbnZhciBzdGF0dXNDYWNoZUZpbGUgPSBcImhpa2VyOi8vZmlsZXMvXCIgKyBtUnVsZS50aXRsZSArIFwiX1wiICsgbVJ1bGUuYXV0aG9yICsgXCIuanNvblwiO1xuLy8g5Li+5L6LIGhpa2VyOi8vZmlsZXMvZGVwb3RTdGF0dXNfdjIuanNvblxucHV0VmFyKHtrZXk6ICdzdGF0dXNDYWNoZUZpbGUnLCB2YWx1ZTogc3RhdHVzQ2FjaGVGaWxlfSk7XG5cbi8vIOaKiuaAu+S7k+W6k+eKtuaAgeWGmeWFpeaWh+S7tlxuZnVuY3Rpb24gd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cykge1xuICAgIHdyaXRlRmlsZShzdGF0dXNDYWNoZUZpbGUsIEpTT04uc3RyaW5naWZ5KGRlcG90U3RhdHVzKSk7XG59XG5cbi8vIOiLpeS4jeaYr+esrOS4gOasoeS9v+eUqOaAu+S7k+W6k+WImemakOiXj+W8gOWPkeaWh+aho1xudmFyIGRlcG90U3RhdHVzID0ge307XG52YXIgZGVwb3RTdGF0dXNGaWxlID0gZmV0Y2goc3RhdHVzQ2FjaGVGaWxlLCB7fSk7XG5pZiAoZGVwb3RTdGF0dXNGaWxlICE9IFwiXCIpIHtcbiAgICBldmFsKFwiZGVwb3RTdGF0dXM9XCIgKyBkZXBvdFN0YXR1c0ZpbGUpO1xufVxuLy8g6Iul6ZyA6KaB5rC45LmF5pi+56S65byA5Y+R5paH5qGj77yM5YiZ5Y+W5raI5rOo6YeKXG4vLyBkZXBvdFN0YXR1cy5zaG93RGV2RG9jID0gdHJ1ZTtcbi8vIOiLpemcgOimgeawuOS5heaYvuekuuaPkOekuu+8jOWImeWPlua2iOazqOmHilxuLy8gZGVwb3RTdGF0dXMuc2hvd1RpcHMgPSB0cnVlO1xuLy8g6Iul6ZyA6KaB5rC45LmF5pi+56S65L6L5a2Q77yM5YiZ5Y+W5raI5rOo6YeKXG4vLyBkZXBvdFN0YXR1cy5zaG93RXRjID0gdHJ1ZTtcblxuXG5mdW5jdGlvbiBpc0hpZGVSdWxlKHJ1bGVUaXRsZSkge1xuICAgIGlmIChuZWVkSGlkZVJ1bGUgIT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGlmIChoaWRlU3ltYm9scy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIHZhciBydWxlVGVtcCA9IHJ1bGVUaXRsZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGVTeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChydWxlVGVtcC5pbmRleE9mKGhpZGVTeW1ib2xzW2ldKSAhPSAtMSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZC5wdXNoKHtcbiAgICB0aXRsZTogXCLmrKLov47mnaXliLDop4bnlYzmgLvku5PlupNcIixcbiAgICBkZXNjOiBcIuWcqOi/memHjO+8jOS9oOWPr+S7peeVhea4uOWQhOS4quWkp+S9rOeahOinhOWIme+8jOW/q+mAn+a1j+iniOW/q+mAn+WvvOWFpVwiLFxuICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxufSk7XG5cbmlmIChkZXBvdFN0YXR1cy5zaG93VGlwcyAhPSBmYWxzZSkge1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIummluasoeWvvOWFpeaPkOekulxcbuKAmOKAmCjku4XmmL7kuIDmrKEp4oCZ4oCZXCIsXG4gICAgICAgIGRlc2M6IFwi4oCY4oCY5LiL5ouJ5Yi35paw5Y2z5Y+v5pi+56S65LuT5bqT4oCZ4oCZXCIgKyBcIlxcbuinhOWImemHjOacieWlveWkmumakOiXj+eahOW8gOWFs+WTpu+8gVwiICsgXCJcXG7igJjigJjmj5DkvpvnmoTkvovlrZDkuZ/ku4XmmL7kuIDmrKHigJnigJlcIixcbiAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgfSk7XG4gICAgZGVwb3RTdGF0dXMuc2hvd1RpcHMgPSBmYWxzZTtcbiAgICB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKTtcbn0gZWxzZSB7XG5cbiAgICBpZiAoZGVwb3RTdGF0dXMuc2hvd0V0YyAhPSBmYWxzZSB8fCBtUnVsZS52ZXJzaW9uICE9IGRlcG90U3RhdHVzLnZlcnNpb24pIHtcbiAgICAgICAgZGVwb3RTdGF0dXMuc2hvd0V0YyA9IGZhbHNlO1xuICAgICAgICBkZXBvdFN0YXR1cy52ZXJzaW9uID0gbVJ1bGUudmVyc2lvbjtcbiAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZVN5bWJvbHMucHVzaChcIlvkvovlrZBdXCIpO1xuICAgIH1cblxuICAgIGlmIChkZXBvdFN0YXR1cy5zaG93RGV2RG9jICE9IGZhbHNlKSB7XG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogXCLjgJDlpKfkvazpgJrpgZPjgJFcXG7igJjigJgo5LuF5pi+5LiA5qyhKeKAmeKAmVwiLFxuICAgICAgICAgICAgZGVzYzogXCLigJjigJjngrnlh7vmn6XnnItWMuaAu+S7k+W6k+W8gOWPkeaWh+aho+KAmeKAmVxcbuinhOWImemHjOacieawuOS5heaYvuekuuW8gOWFs+WPr+S7peiHquW3seWOu+W8gFwiLFxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9ibG9iL21hc3Rlci9SRUFETUUubWQjZG9jdW1lbnQ9aHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc0RlcG90L2Jsb2IvbWFzdGVyL1JFQURNRS5tZFwiLFxuICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgIH0pO1xuICAgICAgICBkZXBvdFN0YXR1cy5zaG93RGV2RG9jID0gZmFsc2U7XG4gICAgICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xuICAgIH1cblxuICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICAgICAgcmV0dXJuIHJ1bGUub2xkVmVyc2lvbiAhPSBudWxsICYmIHJ1bGUub2xkVmVyc2lvbiA8IHJ1bGUudmVyc2lvbiA/IChcIuKAmOKAmOacieaWsOeJiOacrO+8mlwiICsgcnVsZS52ZXJzaW9uICsgXCLigJnigJnvvIzngrnlh7vlr7zlhaXmlrDniYjmnKxcIikgOiBydWxlLm9sZFZlcnNpb24gPiBydWxlLnZlcnNpb24gPyBcIuKAmOKAmOWWte+8n+S4uuWVpeS9oOeahOinhOWImeeJiOacrOavlOaIkei/mOmrmO+8n+KAmeKAmVwiIDogXCLlvZPliY3op4TliJnlt7LmmK/mnIDmlrDniYjvvIzngrnlh7vot7PliLDop4TliJnpobVcIjtcbiAgICB9O1xuXG4gICAgLy8g5Li65omA5pyJ5YiG57G75re75Yqg5oC75LuT5bqT6aG5XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIHJlbW90ZURlcG90UnVsZSA9IHt9O1xuICAgICAgICBldmFsKFwicmVtb3RlRGVwb3RSdWxlPVwiICsgZmV0Y2gocmVtb3RlRGVwb3RSdWxlVXJsLCB7fSkpO1xuICAgICAgICB2YXIgbG9jYWxEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFJ1bGUoKSk7XG4gICAgICAgIHJlbW90ZURlcG90UnVsZS5vbGRWZXJzaW9uID0gbG9jYWxEZXBvdFJ1bGUudmVyc2lvbjtcbiAgICAgICAgLy9zZXRFcnJvcihKU09OLnN0cmluZ2lmeShsb2NhbERlcG90UnVsZSkpO1xuICAgICAgICAvL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KHJlbW90ZURlcG90UnVsZSkpO1xuICAgICAgICBpZiAocmVtb3RlRGVwb3RSdWxlLm9sZFZlcnNpb24gPCByZW1vdGVEZXBvdFJ1bGUudmVyc2lvbikge1xuICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogcmVtb3RlRGVwb3RSdWxlLnRpdGxlICsgXCJcXHRcIiArIGRlc2MocmVtb3RlRGVwb3RSdWxlKSxcbiAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9iYWlkdS5jb20jXCIgKyBKU09OLnN0cmluZ2lmeShyZW1vdGVEZXBvdFJ1bGUpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiLFxuICAgICAgICAgICAgICAgIGRlc2M6IFwi44CQ5pu05paw5pel5b+X44CRXFxu5pu05aSa5a6M5pW05pel5b+X6K+35Zyo6YeM6Z2i54K55Ye76L+b5YWl5Y6f572R6aG15p+l55yLXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZFswXS5kZXNjID0gXCLigJjigJjngrnlh7vlj6/mn6XnnIvmm7TmlrDml6Xlv5figJnigJk8YnI+XCIgKyBkWzBdLmRlc2M7XG4gICAgICAgICAgICBkWzBdLnVybCA9IFwiaHR0cHM6Ly9naXRlZS5jb20vcWl1c3Vuc2hpbmUyMzMvaGlrZXJWaWV3L2Jsb2IvbWFzdGVyL3J1bGV2ZXJzaW9uL0NIQU5HRUxPR19ERVBPVFJVTEVfVjIubWQjdXBkYXRlVGV4dD1cIiArIHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogXCLigJjigJjmgLvku5PlupPmm7TmlrDnqIvluo/lt7LmjZ/lnY/igJnigJlcIixcbiAgICAgICAgICAgIGRlc2M6IFwi6K+36IGU57O7IFwiICsgbVJ1bGUuYXV0aG9yICsgXCIg5L+u5aSNXCIsXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCIsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXV0aG9yTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoaXNIaWRlUnVsZShhdXRob3JMaXN0W2ldKSkge1xuICAgICAgICAgICAgYXV0aG9yTGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGljVXJsID0gbnVsbDtcbiAgICAgICAgdmFyIHBpY1VybEpTID0gYXV0aG9yTGlzdFtpXS5tYXRjaCgvcGljVXJsPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgICAgIGV2YWwocGljVXJsSlMpO1xuICAgICAgICBpZiAocGljVXJsID09IG51bGwpIHBpY1VybCA9IHBpY1VybExpc3RbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcGljVXJsTGlzdC5sZW5ndGgpXTtcbiAgICAgICAgLy8gc2V0RXJyb3IocGljVXJsKVxuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IGF1dGhvckxpc3RbaV0uc3BsaXQoXCJAQFwiKVswXSxcbiAgICAgICAgICAgIHVybDogXCJodHRwczovL2JhaWR1LmNvbSNcIiArIGF1dGhvckxpc3RbaV0sXG4gICAgICAgICAgICBwaWNfdXJsOiBwaWNVcmxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShkKSk7XG5yZXMuZGF0YSA9IGQ7XG5zZXRIb21lUmVzdWx0KHJlcyk7Iiwic2VhcmNoX3VybCI6IiIsInRpdGxlQ29sb3IiOiIjZmZmMjBjMDAiLCJncm91cCI6IiPvuI/ig6PpppbpobUiLCJzZWFyY2hGaW5kIjoiIiwiZGV0YWlsX2NvbF90eXBlIjoidGV4dF8xIiwiZGV0YWlsX2ZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcblxuLy8g6K6+572uIHRydWUg5LiA6ZSu5YeA5YyW77yM6Zmk5LqG6KeE5YiZ5ZKM5LuT5bqT6YCa55+l77yM5ZWl5Lmf5LiN6KaBXG52YXIgaGlkZUFsbCA9IGZhbHNlO1xuLy8g5bCP5LuT5bqT5qCH6aKY5byA5YWz77yI5rOo5oSP5LqL6aG55LiK6Z2i6YKj5Liq77yJ77yM5LiN6ZyA6KaB5pi+56S66K+36K6+572u5Li6dHJ1ZVxudmFyIG5vVGl0bGUgPSB0cnVlO1xuLy8g5rOo5oSP5LqL6aG55byA5YWz77yM5LiN6ZyA6KaB5pi+56S66K+36K6+572u5Li6dHJ1ZVxudmFyIG5vV2FybmluZyA9IGZhbHNlO1xuLy8g6KeE5YiZ5pWw6YeP5pi+56S65byA5YWz77yM5LiN6ZyA6KaB5pi+56S66K+36K6+572u5Li6dHJ1ZVxudmFyIG5vUnVsZXNOdW0gPSBmYWxzZTtcblxuLy8g5piv5ZCm5YWB6K646LaF6L+H5LiA5a6a6KeE5YiZ5pWw5ZCO5pS55Y+Y5pi+56S65qC35byP77yM6buY6K6k5LiN5byA5ZCvXG52YXIgbmVlZENoYW5nZVNob3dUeXBlID0gZmFsc2U7XG4vLyDorr7nva7mnIDlpKfmmL7npLrlrozmlbTmlofmnKznmoTop4TliJnmlbDvvIzlpKfkuo7orr7nva7lgLzliJnmmL7npLrkuLrmjInpkq7moLflvI8o6buY6K6kIHRleHRfMilcbnZhciBzaG93RnVsbFRleHRNYXggPSAxMDtcbi8vIOiuvue9rui2hei/h+WFgeiuuOaYvuekuuWujOaVtOaWh+acrOeahOinhOWImeaVsOWQjuaYvuekuueahOagt+W8j1xudmFyIG92ZXJNYXhTaG93VHlwZSA9IFwidGV4dF8yXCI7XG5cbi8qKlxuICog6KeE5YiZ5pig5bCE5YiX6KGoXG4gKiDlt6bmnKzlnLDvvIzlj7Pov5znq6/vvIzmnKzlnLDmmKDlsITkuLrov5znq6/vvIzovr7liLDmm7/mjaLlhoXlrrnnmoTnm67nmoRcbiAqIO+8iOazqOaEj++8jOeoi+W6j+mAu+i+keS4uuWFiOaYoOWwhOWQjuaJp+ihjOS4i+mdoueahOWIoOmZpOagh+iusO+8iVxuICovXG52YXIgcnVsZXNNYXBwaW5nID0gW1xuICAgIC8vIFt7XCJ0aXRsZVwiOiBcIumihOWRiueJh+KAolRcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwi6aKE5ZGK54mH4oCiUmVcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn1dLFxuICAgIFt7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAolQpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9LCB7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAolJlKVwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifV0sXG4gICAgW3tcInRpdGxlXCI6IFwiLio/KD894oCiQilcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwiLio/KD894oCiUmUpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9XVxuXTtcbi8vIOS6keerr+inhOWImeaYoOWwhOWIl+ihqOmTvuaOpe+8jOagvOW8j+aYr0pTT07mlbDnu4TvvIzor7foh6rlt7Horr7nva5cbnZhciByZW1vdGVSdWxlc01hcHBpbmdVcmwgPSBcIlwiO1xuXG4vLyDlhaXmiI/lvIDlhbPvvJ/vvIjmu5HnqL3vvIkvLyDliKDpmaTlvIDlhbPvvIzkuI3pnIDopoHliKDpmaTor7forr7nva7kuLpmYWxzZVxudmFyIG5lZWREZWxTeW1ib2wgPSB0cnVlO1xuLy8g6Ieq6KGM5re75Yqg6KaB6KKr5Yig5o6J55qE5qCH6K6wXG52YXIgc3ltYm9scyA9IFtcIuagh+iusDFcIiwgXCLmoIforrAyXCJdO1xuXG4vLyDpmpDol4/lvIDlhbPvvIzkuI3pnIDopoHpmpDol4/or7forr7nva7kuLpmYWxzZVxudmFyIG5lZWRIaWRlUnVsZSA9IHRydWU7XG4vLyDoh6rooYzmt7vliqDopoHpmpDol4/nmoTmoIforrDvvIzmoLzlvI/kuLrvvJpb5qCH6K6w5ZCNXVxudmFyIGhpZGVTeW1ib2xzID0gW1wiW+aooeadv11cIiwgXCJb5pyq5a6M5oiQXVwiXTtcblxuLy8g5piv5ZCm6ZqQ6JeP5L6L5a2Q77yM6ZyA6KaB6ZqQ6JeP6K+36K6+572u5Li6dHJ1ZVxudmFyIG5lZWRIaWRlRXRjID0gZmFsc2U7XG5pZiAobmVlZEhpZGVFdGMgPT0gdHJ1ZSkgaGlkZVN5bWJvbHMucHVzaChcIlvkvovlrZBdXCIpO1xuXG4vLyDku5PlupPnirbmgIHnvJPlrZjmlofku7blnLDlnYBcbnZhciBzdGF0dXNDYWNoZUZpbGUgPSBnZXRWYXIoJ3N0YXR1c0NhY2hlRmlsZScpO1xuaWYgKHN0YXR1c0NhY2hlRmlsZSA9PSBudWxsIHx8IHN0YXR1c0NhY2hlRmlsZSA9PSBcIlwiKSBzdGF0dXNDYWNoZUZpbGUgPSBcImhpa2VyOi8vZmlsZXMvZGVwb3RTdGF0dXNfdjIuanNvblwiO1xuLy8g5Li+5L6LIGhpa2VyOi8vZmlsZXMvZGVwb3RTdGF0dXNfdjIuanNvblxuLy8gc2V0RXJyb3Ioc3RhdHVzQ2FjaGVGaWxlKTtcblxuLy8g6Iul6ZyA6KaB5YWz6Zet5b+955Wl5pys5qyh5pu05paw6K+36K6+572u5Li6dHJ1ZVxudmFyIG5vSWdub3JlVXBkYXRlID0gZmFsc2U7XG4vLyDmnKzlnLDlv73nlaXmm7TmlrDliJfooajvvIxcbi8vIOWGheWuueaooeadv+S4uiB7dGl0bGU6IFwi6KeE5YiZ5ZCNXCIsIGF1dGhvcjogXCLop4TliJnkvZzogIVcIn1cbnZhciBpZ25vcmVVcGRhdGVSdWxlTGlzdCA9IFtcbi8vIHt0aXRsZTogXCLpooTlkYrniYfigKJSZVwiLCBhdXRob3I6IFwiUmVib3JuXCJ9LFxuXTtcbi8vIOS6keerr+W/veeVpeabtOaWsOWIl+ihqOmTvuaOpe+8jOagvOW8j+aYr0pTT07mlbDnu4TvvIzor7foh6rlt7Horr7nva5cbnZhciByZW1vdGVJZ25vcmVMaXN0VXJsID0gXCJcIjtcblxuLy8g5Y+C6ICD6ZO+5o6l77yaXG4vLyBodHRwczovL2dpdGVlLmNvbS9SZWJvcm5fMC9IaWtlclJ1bGVzRGVwb3QvcmF3L21hc3Rlci9pZ25vcmVVcGRhdGVSdWxlTGlzdC5qc29uXG4vLyBodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9SZWJvcm4vaWdub3JlVXBkYXRlUnVsZUxpc3QuanNvblxuXG52YXIgcmVtb3RlSWdub3JlTGlzdCA9IFtdO1xudHJ5IHtcbiAgICBldmFsKFwicmVtb3RlSWdub3JlTGlzdD1cIiArIGZldGNoKHJlbW90ZUlnbm9yZUxpc3RVcmwsIHt9KSk7XG59IGNhdGNoIChlKSB7XG59XG5BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShpZ25vcmVVcGRhdGVSdWxlTGlzdCwgcmVtb3RlSWdub3JlTGlzdCk7XG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShyZW1vdGVJZ25vcmVMaXN0KSk7XG5cblxudmFyIHJlbW90ZVJ1bGVzTWFwcGluZyA9IFtdO1xudHJ5IHtcbiAgICBldmFsKFwicmVtb3RlUnVsZXNNYXBwaW5nPVwiICsgZmV0Y2gocmVtb3RlUnVsZXNNYXBwaW5nVXJsLCB7fSkpO1xufSBjYXRjaCAoZSkge1xufVxuQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocnVsZXNNYXBwaW5nLCByZW1vdGVSdWxlc01hcHBpbmcpO1xuLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkocnVsZXNNYXBwaW5nKSk7XG5cbi8vIOazqOaEj+S6i+mhueaWh+Wtl1xudmFyIHdhcmluZ1RleHQgPSBcIjEuIOS/neWtmOWQjumcgOimgeaJi+WKqOS4i+aLieWIt+aWsOaJjeiDveabtOaWsOinhOWImeeKtuaAgVwiICsgXCJcXG4yLiDmjInpkq7lvaLnirbnmoTop4TliJnmmK/lpITkuo7mnIDmlrDniYjmnKznmoTvvIzngrnlh7vlj6/ot7Povazoh7Pop4TliJnpobVcIjtcbi8vIOmmluasoeWvvOWFpeaWh+Wtl1xudmFyIGZpcnN0SW1wb3J0VGV4dCA9IFwiMS7igJjigJjkuIvmi4nliLfmlrDljbPlj6/mmL7npLrku5PlupPop4TliJnigJnigJlcIiArIFwiXFxuMi7kuoznuqfop4TliJnkuK0gbmVlZENoYW5nZVNob3dUeXBlIOWPr+iuvue9ruaYvuekuuagt+W8j1wiICsgXCJcXG4zLuS6jOe6p+inhOWImeS4rSBoaWRlQWxsIOWPr+iuvue9ruS4gOmUrumakOiXj+agh+mimOWSjOazqOaEj+S6i+mhuVwiO1xuXG4vKipcbiAqIOWPr+WcqOatpOWkhOiHquWumuS5ieS7k+W6k++8jOWunueOsOengeS6uuS7k+W6k1xuICpcbiAqIOS7pVJlYm9ybuS7k+W6k+eahOmTvuaOpeS4uuWPguiAg1xuICpcbiAqIGh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9ibG9iL21hc3Rlci91cGRhdGUuanNvblxuICovXG52YXIgYXV0aG9yTGlzdCA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXTtcbnZhciBhdXRob3JBbmRPd25lckFuZFByb2plY3QgPSBhdXRob3JMaXN0LnNwbGl0KFwiQEBcIik7XG52YXIgYXV0aG9yID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzBdO1xudmFyIHJlbW90ZVVybCA9IFwiXCI7XG5cbnZhciBhcGlUeXBlID0gXCIxXCI7ICAvLyAwIOS4uuaWh+S7tuebtOmTvu+8jDEg5Li656CB5LqRQVBJXG52YXIgYXBpVHlwZUpTID0gYXV0aG9yTGlzdC5tYXRjaCgvYXBpVHlwZT0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuZXZhbChhcGlUeXBlSlMpO1xuaWYgKGFwaVR5cGUgPT0gbnVsbCkgYXBpVHlwZSA9IFwiMVwiO1xuXG5pZiAoYXBpVHlwZSA9PSBcIjBcIikge1xuICAgIHZhciBmdWxsVXJsID0gXCJcIjtcbiAgICB2YXIgZnVsbFVybEpTID0gYXV0aG9yTGlzdC5tYXRjaCgvZnVsbFVybD0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgIGV2YWwoZnVsbFVybEpTKTtcbiAgICByZW1vdGVVcmwgPSBmdWxsVXJsO1xufSBlbHNlIGlmIChhcGlUeXBlID09IFwiMVwiKSB7XG4gICAgdmFyIHJlbW90ZUFwaUhvbWUgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy9cIjtcbiAgICB2YXIgb3duZXIgPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMV07ICAgLy8g5LuT5bqT5oul5pyJ6ICFXG4gICAgdmFyIHJlcG8gPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMl07IC8vIOS7k+W6k+WQjVxuICAgIHZhciByZW1vdGVGaWxlbmFtZSA9IG51bGw7IC8vIOaWh+S7tuWQjVxuICAgIHZhciBwYXRoID0gcmVtb3RlRmlsZW5hbWU7ICAvLyDlnKjku5PlupPkuK3mlofku7bnmoTot6/lvoRcbiAgICB2YXIgYWNjZXNzX3Rva2VuID0gbnVsbDsgIC8vIOeUqOaIt+aOiOadg+egge+8jOWcqOeggeS6kVwi6K6+572u4oCUPuWuieWFqOiuvuWumi0+5Liq5Lq66K6/6Zeu5Luk54mMXCLkuK3lj6/ku6XnlJ/miJBcbiAgICB2YXIgdG9rZW5KUyA9IGF1dGhvckxpc3QubWF0Y2goL2FjY2Vzc190b2tlbj0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgIGV2YWwodG9rZW5KUyk7XG4gICAgLy8gc2V0RXJyb3IoYWNjZXNzX3Rva2VuPT1udWxsKTtcbiAgICB2YXIgcmVtb3RlRmlsZW5hbWVKUyA9IGF1dGhvckxpc3QubWF0Y2goL3JlbW90ZUZpbGVuYW1lPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgZXZhbChyZW1vdGVGaWxlbmFtZUpTKTtcbiAgICBpZiAocmVtb3RlRmlsZW5hbWUgPT0gbnVsbCkge1xuICAgIH1cbiAgICByZW1vdGVGaWxlbmFtZSA9IFwidXBkYXRlLmpzb25cIjtcbiAgICBwYXRoID0gcmVtb3RlRmlsZW5hbWU7XG4gICAgLy8gc2V0RXJyb3IocmVtb3RlRmlsZW5hbWUpXG4gICAgLy8gQVBJ6ZO+5o6l5Y+C6ICD77yaaHR0cHM6Ly9naXRlZS5jb20vYXBpL3Y1L3JlcG9zL3t7b3duZXJ9fS97e3JlcG99fS9jb250ZW50cy97e3BhdGh9fT9hY2Nlc3NfdG9rZW49KioqKlxuICAgIHJlbW90ZVVybCA9IHJlbW90ZUFwaUhvbWUgKyBvd25lciArIFwiL1wiICsgcmVwbyArIFwiL2NvbnRlbnRzL1wiICsgcGF0aDtcbiAgICBpZiAoYWNjZXNzX3Rva2VuICE9IG51bGwpIHtcbiAgICAgICAgcmVtb3RlVXJsID0gcmVtb3RlVXJsICsgXCI/YWNjZXNzX3Rva2VuPVwiICsgYWNjZXNzX3Rva2VuO1xuICAgIH1cbiAgICAvLyBzZXRFcnJvcihyZW1vdGVVcmwpO1xuICAgIC8vIHZhciByZW1vdGVIb21lID0gXCJodHRwczovL2dpdGVlLmNvbS9cIiArIG93bmVyICsgXCIvXCIgKyByZXBvICsgXCIvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cIjtcbn1cblxuLy8g5oqK5oC75LuT5bqT54q25oCB5YaZ5YWl5paH5Lu2XG5mdW5jdGlvbiB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKSB7XG4gICAgd3JpdGVGaWxlKHN0YXR1c0NhY2hlRmlsZSwgSlNPTi5zdHJpbmdpZnkoZGVwb3RTdGF0dXMpKTtcbn1cblxuLy8g6Iul5LiN5piv56ys5LiA5qyh5L2/55So5oC75LuT5bqT5YiZ6ZqQ6JeP5byA5Y+R5paH5qGjXG52YXIgZGVwb3RTdGF0dXMgPSB7fTtcbnZhciBkZXBvdFN0YXR1c0ZpbGUgPSBmZXRjaChzdGF0dXNDYWNoZUZpbGUsIHt9KTtcbmlmIChkZXBvdFN0YXR1c0ZpbGUgIT0gXCJcIikge1xuICAgIGV2YWwoXCJkZXBvdFN0YXR1cz1cIiArIGRlcG90U3RhdHVzRmlsZSk7XG59XG4vLyDoi6XpnIDopoHmsLjkuYXmmL7npLrmj5DnpLrvvIzliJnlj5bmtojms6jph4pcbi8vIGRlcG90U3RhdHVzLnNob3dTZWNvbmRMaXN0VGlwcyA9IHRydWU7XG5cbmlmIChnZXRVcmwoKS5pbmRleE9mKFwicnVsZTovL1wiKSAhPSAtMSkge1xuICAgIHZhciByZW1vdGVEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi5pu05paw5pel5b+XICjngrnlh7vlj6/mn6XnnIvlrozmlbTml6Xlv5cpXCIsXG4gICAgICAgIGRlc2M6IHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0LFxuICAgICAgICB1cmw6IFwiaHR0cHM6Ly9naXRlZS5jb20vcWl1c3Vuc2hpbmUyMzMvaGlrZXJWaWV3L2Jsb2IvbWFzdGVyL3J1bGV2ZXJzaW9uL0NIQU5HRUxPR19ERVBPVFJVTEVfVjIubWRcIixcbiAgICAgICAgY29sX3R5cGU6IFwicGljXzFcIlxuICAgIH0pO1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIueCueWHu+abtOaWsOaAu+S7k+W6k1wiLFxuICAgICAgICB1cmw6IHJlbW90ZURlcG90UnVsZS5ydWxlLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbn0gZWxzZSBpZiAoZ2V0VXJsKCkuaW5kZXhPZihcInVwZGF0ZVRleHQ9XCIpICE9IC0xKSB7XG4gICAgdmFyIHVwZGF0ZVRleHQgPSBudWxsO1xuICAgIC8vIHVwZGF0ZVRleHRKUyA9IFwidXBkYXRlVGV4dD0nXCIgKyBnZXRVcmwoKS5zcGxpdChcIiNcIilbMV0ucmVwbGFjZShcInVwZGF0ZVRleHQ9XCIsIFwiXCIpICsgXCInO1wiO1xuICAgIC8vIGV2YWwodXBkYXRlVGV4dEpTKTtcbiAgICB1cGRhdGVUZXh0ID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdLnJlcGxhY2UoXCJ1cGRhdGVUZXh0PVwiLCBcIlwiKTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLmm7TmlrDml6Xlv5cgKOeCueWHu+WPr+afpeeci+WujOaVtOaXpeW/lylcIixcbiAgICAgICAgZGVzYzogdXBkYXRlVGV4dCAhPSBudWxsID8gdXBkYXRlVGV4dCA6IFwi5pqC5peg5pu05paw5pel5b+XXCIsXG4gICAgICAgIHVybDogXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvYmxvYi9tYXN0ZXIvcnVsZXZlcnNpb24vQ0hBTkdFTE9HX0RFUE9UUlVMRV9WMi5tZFwiLFxuICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG59IGVsc2UgaWYgKGdldFVybCgpLmluZGV4T2YoXCJkb2N1bWVudD1cIikgIT0gLTEpIHtcbiAgICB2YXIgZG9jdW1lbnRVcmwgPSBudWxsO1xuICAgIGRvY3VtZW50VXJsID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdLnJlcGxhY2UoXCJkb2N1bWVudD1cIiwgXCJcIik7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi5oC75LuT5bqT5byA5Y+R5paH5qGj5YWl5Y+jXCIsXG4gICAgICAgIGRlc2M6IFwi6L+Z5piv5LiT6Zeo57uZ5aSn5L2s5Lus5YaZ55qE77yM5paH56yU5aSq5beu5LqG77yM6KeJ5b6X5YaZ5b6X5Lmx6L+Y6K+35L2T6LCF5LiA5LiL8J+ZiOOAguacieS4jeaHgueahOWcsOaWueWPr+S7peiBlOezu+aIke+8jOa6nOS6hua6nOS6hu+9nlwiLFxuICAgICAgICB1cmw6IGRvY3VtZW50VXJsLFxuICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi54K55Ye75Y+v5p+l55yL5a6M5pW05paH5qGjXCIsXG4gICAgICAgIHVybDogZG9jdW1lbnRVcmwsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcblxuICAgIGZ1bmN0aW9uIGdldFJ1bGVOb1N5bWJvbHMocnVsZSwgc3ltYm9sTGlzdCkge1xuICAgICAgICBpZiAobmVlZERlbFN5bWJvbCAhPSB0cnVlKSByZXR1cm4gcnVsZTtcbiAgICAgICAgdmFyIHJ1bGVUZW1wID0gcnVsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ltYm9sUmVnID0gbmV3IFJlZ0V4cChzeW1ib2xMaXN0W2ldLCBcImdcIik7XG4gICAgICAgICAgICBydWxlVGVtcC50aXRsZSA9IHJ1bGVUZW1wLnRpdGxlLnJlcGxhY2Uoc3ltYm9sUmVnLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KHJ1bGVUZW1wKSk7XG4gICAgICAgIHJldHVybiBydWxlVGVtcDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0hpZGVSdWxlKHJ1bGUpIHtcbiAgICAgICAgaWYgKG5lZWRIaWRlUnVsZSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIGlmIChoaWRlU3ltYm9scy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcnVsZVRlbXAgPSBydWxlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhpZGVTeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocnVsZVRlbXAudGl0bGUuaW5kZXhPZihoaWRlU3ltYm9sc1tpXSkgIT0gLTEpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyDlpoLmnpzmnKzlnLDmsqHmnInliJnmj5DnpLrlr7zlhaXmlrDop4TliJlcbiAgICAvLyDlm6Dpg6jliIbmiYvmnLrkuI3mlK/mjIFlczbor63ms5XvvIzmlYXms6jph4rmjolcbiAgICAvKnZhciBteVJ1bGVzTWFwID0gbmV3IE1hcCgpO1xuICAgIG15UnVsZXMubWFwKHJ1bGUgPT4ge1xuICAgICAgICBteVJ1bGVzTWFwLnNldChydWxlLnRpdGxlLCB0cnVlKTtcbiAgICB9KTtcbiAgICAvL3NldEVycm9yKG15UnVsZXNNYXAuZ2V0KFwi6IW+6K6v4oCiUmVcIikpOyovXG5cbiAgICBmdW5jdGlvbiBnZXRSdWxlSW5BcnJheShydWxlcywgcnVsZSkge1xuICAgICAgICBpZiAocnVsZXMgPT0gbnVsbCB8fCBydWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChydWxlc1tpXS50aXRsZSA9PSBydWxlLnRpdGxlICYmIHJ1bGVzW2ldLmF1dGhvciA9PSBhdXRob3IpIHJldHVybiBydWxlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDljp/lp4vmlrnms5XvvIzmr5TovoPogJfml7ZcbiAgICBmdW5jdGlvbiBpc0luQXJyYXkocnVsZXMsIHJ1bGUpIHtcbiAgICAgICAgaWYgKGdldFJ1bGVJbkFycmF5KHJ1bGVzLCBydWxlKSAhPSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNJZ25vcmVVcGRhdGVSdWxlKHJ1bGUpIHtcbiAgICAgICAgaWYgKGlzSW5BcnJheShpZ25vcmVVcGRhdGVSdWxlTGlzdCwgcnVsZSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIGNhY2hlSWdub3JlUnVsZSA9IGdldFJ1bGVJbkFycmF5KGRlcG90U3RhdHVzLmlnbm9yZVVwZGF0ZVJ1bGVMaXN0LCBydWxlKTtcbiAgICAgICAgICAgIGlmIChjYWNoZUlnbm9yZVJ1bGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChkZXBvdFN0YXR1cy5pZ25vcmVVcGRhdGVSdWxlTGlzdCA9PSBudWxsKSBkZXBvdFN0YXR1cy5pZ25vcmVVcGRhdGVSdWxlTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGNhY2hlSWdub3JlUnVsZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHJ1bGUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogYXV0aG9yLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBydWxlLnZlcnNpb25cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlcG90U3RhdHVzLmlnbm9yZVVwZGF0ZVJ1bGVMaXN0LnB1c2goY2FjaGVJZ25vcmVSdWxlKTtcbiAgICAgICAgICAgICAgICB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAocnVsZS52ZXJzaW9uICE9IGNhY2hlSWdub3JlUnVsZS52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlSWdub3JlUnVsZS52ZXJzaW9uID0gcnVsZS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0SWdub3JlVXBkYXRlUnVsZShydWxlKSB7XG4gICAgICAgIGlmIChpc0lnbm9yZVVwZGF0ZVJ1bGUocnVsZSkgPT0gdHJ1ZSkgcnVsZS5pc0lnbm9yZVVwZGF0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHJ1bGVzID0gW107XG4gICAgZXZhbChcInJ1bGVzPVwiICsgZmV0Y2goXCJoaWtlcjovL2hvbWVcIiwge30pKTtcbiAgICB2YXIgbXlSdWxlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHJ1bGUgPSBydWxlc1tpXTtcbiAgICAgICAgaWYgKHJ1bGUuYXV0aG9yID09IGF1dGhvcikge1xuICAgICAgICAgICAgbXlSdWxlcy5wdXNoKGdldFJ1bGVOb1N5bWJvbHMocnVsZSwgc3ltYm9scykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkobXlSdWxlcykpO1xuXG4gICAgZnVuY3Rpb24gZ2V0UnVsZUluUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkge1xuICAgICAgICBpZiAocnVsZXMgPT0gbnVsbCB8fCBydWxlcy5sZW5ndGggPT0gMCB8fCBydWxlID09IG51bGwgfHwgcnVsZS5tYXBwaW5nVGl0bGUgPT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChydWxlc1tpXS5tYXBwaW5nVGl0bGUgIT0gbnVsbCAmJiBydWxlc1tpXS5tYXBwaW5nVGl0bGUgPT0gcnVsZS5tYXBwaW5nVGl0bGUgJiYgcnVsZXNbaV0uYXV0aG9yID09IGF1dGhvcikgcmV0dXJuIHJ1bGVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzSW5SdWxlc1dpdGhNYXBwaW5nKHJ1bGVzLCBydWxlKSB7XG4gICAgICAgIGlmIChnZXRSdWxlSW5SdWxlc1dpdGhNYXBwaW5nKHJ1bGVzLCBydWxlKSAhPSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGRlc2MgPSBmdW5jdGlvbiAocnVsZXMsIHJ1bGUpIHtcbiAgICAgICAgaWYgKGlzSW5SdWxlc1dpdGhNYXBwaW5nKHJ1bGVzLCBydWxlKSA9PSB0cnVlIHx8IGlzSW5BcnJheShydWxlcywgcnVsZSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJ1bGUub2xkVmVyc2lvbiAhPSBudWxsICYmIHJ1bGUub2xkVmVyc2lvbiA8IHJ1bGUudmVyc2lvbiA/IChcIuKAmOKAmOacieaWsOeJiOacrO+8mlwiICsgcnVsZS52ZXJzaW9uICsgXCLigJnigJnvvIzngrnlh7vlr7zlhaXmlrDniYjmnKxcIikgKyAoXCI8YnI+PGJyPlvmm7TmlrDml6Xlv5ddIFwiICsgKHJ1bGUudXBkYXRlVGV4dCA9PSBudWxsID8gXCLml6BcIiA6IHJ1bGUudXBkYXRlVGV4dCkgKyAocnVsZS50aXBzICE9IG51bGwgJiYgcnVsZS50aXBzICE9IFwiXCIgPyBcIjxicj48YnI+VGlwczogXCIgKyBydWxlLnRpcHMgOiBcIlwiKSkgOiBydWxlLm9sZFZlcnNpb24gPiBydWxlLnZlcnNpb24gPyBcIuKAmOKAmOWWte+8n+S4uuWVpeS9oOeahOinhOWImeeJiOacrOavlOaIkei/mOmrmO+8n+KAmeKAmVwiIDogXCLlvZPliY3op4TliJnlt7LmmK/mnIDmlrDniYjvvIzngrnlh7vot7PliLDop4TliJnpobVcIiArIChydWxlLnRpcHMgIT0gbnVsbCAmJiBydWxlLnRpcHMgIT0gXCJcIiA/IFwiXFxuXFxuVGlwczogXCIgKyBydWxlLnRpcHMgOiBcIlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBcIuKAmOKAmOS9oOWwmuacquWvvOWFpeivpeinhOWImeKAmeKAme+8jOeCueWHu+WvvOWFpVwiICsgKHJ1bGUudGlwcyAhPSBudWxsICYmIHJ1bGUudGlwcyAhPSBcIlwiID8gXCI8YnI+PGJyPlRpcHM6IFwiICsgcnVsZS50aXBzIDogXCJcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGRlcG90U3RhdHVzLnNob3dTZWNvbmRMaXN0VGlwcyAhPSBmYWxzZSkge1xuICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgdGl0bGU6IFwi6aaW5qyh5a+85YWl5o+Q56S6XFxu4oCY4oCYKOS7heaYvuS4gOasoSnigJnigJlcIixcbiAgICAgICAgICAgIGRlc2M6IGZpcnN0SW1wb3J0VGV4dCxcbiAgICAgICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgICAgICB9KTtcbiAgICAgICAgZGVwb3RTdGF0dXMuc2hvd1NlY29uZExpc3RUaXBzID0gZmFsc2U7XG4gICAgICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub1RpdGxlICE9IHRydWUgJiYgaGlkZUFsbCAhPSB0cnVlKSB7XG4gICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBcIuKAmOKAmOi/memHjOaYryBcIiArIGF1dGhvciArIFwiIOeahOinhOWImeWwj+S7k+W6k+KAmeKAmVwiLFxuICAgICAgICAgICAgICAgIC8vIGRlc2M6IFwi54K55Ye75Y+v6K6/6Zeu6KeE5YiZ5LuT5bqT5rqQXCIsXG4gICAgICAgICAgICAgICAgLy8gdXJsOiByZW1vdGVIb21lLFxuICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInRleHRfMVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZW1vdGVSdWxlcyA9IFtdO1xuICAgICAgICAvLyB2YXIgcmVtb3RlVXJsID0gcmVtb3RlQXBpSG9tZSArIGVuY29kZVVSSUNvbXBvbmVudChhdXRob3IpICsgXCIvXCIgKyByZW1vdGVGaWxlbmFtZTtcbiAgICAgICAgdmFyIHJlbW90ZVNvdXJjZSA9IGZldGNoKHJlbW90ZVVybCwge30pO1xuICAgICAgICAvLyBzZXRFcnJvcihyZW1vdGVVcmwpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZXZhbChcInJlbW90ZVNvdXJjZT1cIiArIHJlbW90ZVNvdXJjZSk7XG4gICAgICAgICAgICBpZiAoYXBpVHlwZSA9PSBcIjBcIikge1xuICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzID0gcmVtb3RlU291cmNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChhcGlUeXBlID09IFwiMVwiKSB7XG4gICAgICAgICAgICAgICAgZXZhbChcInJlbW90ZVJ1bGVzPVwiICsgYmFzZTY0RGVjb2RlKHJlbW90ZVNvdXJjZS5jb250ZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtb3RlUnVsZXMuZGF0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vdGljZSA9IHJlbW90ZVJ1bGVzLm5vdGljZTtcbiAgICAgICAgICAgICAgICBpZiAobm90aWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAobm90aWNlKSA9PSBcInN0cmluZ1wiICYmIG5vdGljZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuS7k+W6k+mAmuefpVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IG5vdGljZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKG5vdGljZSkgPT0gXCJvYmplY3RcIiAmJiBub3RpY2UuZGVzYyAhPSBudWxsICYmIG5vdGljZS5kZXNjICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG5vdGljZS50aXRsZSAhPSBudWxsICYmIG5vdGljZS50aXRsZSAhPSBcIlwiID8gbm90aWNlLnRpdGxlIDogXCLku5PlupPpgJrnn6VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiBub3RpY2UuZGVzYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNfdXJsOiBub3RpY2UucGljVXJsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInBpY18xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzID0gcmVtb3RlUnVsZXMuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub1dhcm5pbmcgIT0gdHJ1ZSAmJiBoaWRlQWxsICE9IHRydWUpIHtcbiAgICAgICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCLms6jmhI/kuovpoblcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogd2FyaW5nVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgY29sX3R5cGU6IFwicGljXzFcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBcImhpa2VyOi8vaG9tZUDmgLvku5PlupNcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIH1cbiAgICAgICAgLy9zZXRFcnJvcihyZW1vdGVSdWxlcy5sZW5ndGgpO1xuICAgICAgICBpZiAocmVtb3RlUnVsZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vc2V0RXJyb3IobXlSdWxlcy5sZW5ndGgpO1xuICAgICAgICAgICAgaWYgKG15UnVsZXMubGVuZ3RoID49IHJlbW90ZVJ1bGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIC8vIOS4jeefpemBk+S8muS4jeS8muaciemXrumimFxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXlSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlbW90ZVJ1bGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxSdWxlID0gbXlSdWxlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVSdWxlID0gcmVtb3RlUnVsZXNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNIaWRlUnVsZShyZW1vdGVSdWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJZ25vcmVVcGRhdGVSdWxlKHJlbW90ZVJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBydWxlc01hcHBpbmcubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZU1hcHBpbmcgPSBydWxlc01hcHBpbmdba107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFJ1bGVNYXBwaW5nVGl0bGUgPSBydWxlTWFwcGluZ1swXS50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKGxvY2FsUnVsZU1hcHBpbmdUaXRsZSwgXCJnXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlID0gbG9jYWxSdWxlLnRpdGxlLm1hdGNoKHRpdGxlUmVnZXgpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlUnVsZU1hcHBpbmdUaXRsZSA9IHJ1bGVNYXBwaW5nWzFdLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZVJlZ2V4ID0gbmV3IFJlZ0V4cChyZW1vdGVSdWxlTWFwcGluZ1RpdGxlLCBcImdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubWFwcGluZ1RpdGxlID0gcmVtb3RlUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPT0gcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubG9jYWxUaXRsZSA9IGxvY2FsUnVsZS50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUuaXNNYXBwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5vbGRWZXJzaW9uID0gbG9jYWxSdWxlLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLnRpdGxlID09IHJlbW90ZVJ1bGUudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm9sZFZlcnNpb24gPSBsb2NhbFJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2pdLnJ1bGU9bXlSdWxlc1tpXS5ydWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbal0uZGVzYz1teVJ1bGVzW2ldLmRlc2M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3RlUnVsZSA9IHJlbW90ZVJ1bGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGlzSGlkZVJ1bGUocmVtb3RlUnVsZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRJZ25vcmVVcGRhdGVSdWxlKHJlbW90ZVJ1bGUpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG15UnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFJ1bGUgPSBteVJ1bGVzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBydWxlc01hcHBpbmcubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZU1hcHBpbmcgPSBydWxlc01hcHBpbmdba107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFJ1bGVNYXBwaW5nVGl0bGUgPSBydWxlTWFwcGluZ1swXS50aXRsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKGxvY2FsUnVsZU1hcHBpbmdUaXRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPSBsb2NhbFJ1bGUudGl0bGUubWF0Y2godGl0bGVSZWdleClbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMV0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUsIFwiZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUgPSByZW1vdGVSdWxlLnRpdGxlLm1hdGNoKHRpdGxlUmVnZXgpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9PSByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5sb2NhbFRpdGxlID0gbG9jYWxSdWxlLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5pc01hcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm9sZFZlcnNpb24gPSBsb2NhbFJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS50aXRsZSA9PSByZW1vdGVSdWxlLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5vbGRWZXJzaW9uID0gbG9jYWxSdWxlLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdGVSdWxlc1tpXS5ydWxlPW15UnVsZXNbal0ucnVsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2ldLmRlc2M9bXlSdWxlc1tqXS5kZXNjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1lcmdlU29ydChhcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobGVuIDwgMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWlkZGxlID0gTWF0aC5mbG9vcihsZW4gLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGFyci5zbGljZSgwLCBtaWRkbGUpLFxuICAgICAgICAgICAgICAgICAgICByaWdodCA9IGFyci5zbGljZShtaWRkbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZShtZXJnZVNvcnQobGVmdCksIG1lcmdlU29ydChyaWdodCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtZXJnZShsZWZ0LCByaWdodCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaWdub3JlVXBkYXRlTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpc1RoaXNWZXJzaW9uTGlzdCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlZnQubGVuZ3RoID4gMCAmJiByaWdodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0WzBdLmlzSWdub3JlVXBkYXRlID09IHRydWUgJiYgbGVmdFswXS5vbGRWZXJzaW9uICE9IGxlZnRbMF0udmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlVXBkYXRlTGlzdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0uaXNJZ25vcmVVcGRhdGUgPT0gdHJ1ZSAmJiByaWdodFswXS5vbGRWZXJzaW9uICE9IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZVVwZGF0ZUxpc3QucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0WzBdLm9sZFZlcnNpb24gPCBsZWZ0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0ub2xkVmVyc2lvbiA8IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRbMF0ub2xkVmVyc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0WzBdLm9sZFZlcnNpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmlnaHQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RoaXNWZXJzaW9uTGlzdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RoaXNWZXJzaW9uTGlzdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGlnbm9yZVVwZGF0ZUxpc3QubGVuZ3RoKSByZXN1bHQucHVzaChpZ25vcmVVcGRhdGVMaXN0LnNoaWZ0KCkpO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGlzVGhpc1ZlcnNpb25MaXN0Lmxlbmd0aCkgcmVzdWx0LnB1c2goaXNUaGlzVmVyc2lvbkxpc3Quc2hpZnQoKSk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAobGVmdC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAocmlnaHQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlbW90ZVJ1bGVzID0gbWVyZ2VTb3J0KHJlbW90ZVJ1bGVzKTtcblxuICAgICAgICAgICAgaWYgKG5vUnVsZXNOdW0gIT0gdHJ1ZSAmJiBoaWRlQWxsICE9IHRydWUpXG4gICAgICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiPGI+6K+l5LuT5bqT5YWx5pyJIOKAmOKAmFwiICsgcmVtb3RlUnVsZXMubGVuZ3RoICsgXCLigJnigJkg5p2h6KeE5YiZPGIvPlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0XzFcIlxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShyZW1vdGVSdWxlcykpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBqID0gcmVtb3RlUnVsZXNbaV07XG4gICAgICAgICAgICAgICAgdmFyIHJ1bGVXaXRoTWFwcGluZyA9IGdldFJ1bGVJblJ1bGVzV2l0aE1hcHBpbmcocmVtb3RlUnVsZXMsIGopO1xuICAgICAgICAgICAgICAgIGlmIChydWxlV2l0aE1hcHBpbmcgIT0gbnVsbCAmJiBnZXRSdWxlSW5SdWxlc1dpdGhNYXBwaW5nKG15UnVsZXMsIGopKSBqID0gcnVsZVdpdGhNYXBwaW5nO1xuICAgICAgICAgICAgICAgIHZhciByID0ge307XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRDaGFuZ2VTaG93VHlwZSA9PSB0cnVlICYmIGoub2xkVmVyc2lvbiAhPSBudWxsICYmIGoub2xkVmVyc2lvbiA+PSBqLnZlcnNpb24gJiYgcmVtb3RlUnVsZXMubGVuZ3RoID4gc2hvd0Z1bGxUZXh0TWF4KSByLmNvbF90eXBlID0gb3Zlck1heFNob3dUeXBlO1xuICAgICAgICAgICAgICAgIHIuZGVzYyA9IChub0lnbm9yZVVwZGF0ZSAhPSB0cnVlICYmIGouaXNJZ25vcmVVcGRhdGUgPT0gdHJ1ZSkgJiYgKGoub2xkVmVyc2lvbiA9PSBudWxsIHx8IGoub2xkVmVyc2lvbiA8IGoudmVyc2lvbikgPyBcIuivpeinhOWImeW3suW/veeVpeacrOasoeabtOaWsFwiIDogZGVzYyhteVJ1bGVzLCBqKTtcbiAgICAgICAgICAgICAgICByLnRpdGxlID0gai5tYXBwaW5nVGl0bGUgIT0gbnVsbCAmJiBqLm1hcHBpbmdUaXRsZSAhPSBcIlwiICYmIGouaXNNYXBwZWQgPT0gdHJ1ZSA/IGoubWFwcGluZ1RpdGxlIDogai50aXRsZTtcbiAgICAgICAgICAgICAgICByLnVybCA9IGlzSW5BcnJheShteVJ1bGVzLCBqKSB8fCBqLmlzTWFwcGVkID09IHRydWUgPyAoai5vbGRWZXJzaW9uICE9IG51bGwgJiYgai5vbGRWZXJzaW9uIDwgai52ZXJzaW9uID8gKGoucnVsZSB8fCBcIlwiKSA6IChcImhpa2VyOi8vaG9tZUBcIiArIChqLmxvY2FsVGl0bGUgIT0gbnVsbCAmJiBqLmxvY2FsVGl0bGUgIT0gXCJcIiA/IGoubG9jYWxUaXRsZSA6IGoudGl0bGUpKSkgOiAoai5ydWxlIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIC8vci5jb250ZW50ID0gai51cGRhdGVUZXh0O1xuICAgICAgICAgICAgICAgIGQucHVzaChyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxufVxucmVzLmRhdGEgPSBkO1xuc2V0SG9tZVJlc3VsdChyZXMpOyIsInNkZXRhaWxfY29sX3R5cGUiOiJtb3ZpZV8xIiwic2RldGFpbF9maW5kX3J1bGUiOiIifQ==" 
}