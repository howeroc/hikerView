{
    "title": "ÊÄª‰ªìÂ∫ì",
    "author": "Reborn",
    "version": 33,
    "updateText": "1.‚Äò‚Äò‰øÆÂ§ç‚Äô‚Äô:Ëá™ÂÆö‰πâÊñá‰ª∂ÂêçÂ§±ÊïàÁöÑÈóÆÈ¢ò\n2.üôàÔ∏èÊäÄÁ©∑‰∫ÜÔºåËøôÂèØËÉΩÁúüÁöÑÊòØÊúÄÂêé‰∫ø‰∏™ÁâàÊú¨‰∫Ü\n3.Êõ¥Â§öÊõ¥Êñ∞Êó•ÂøóËØ∑ÁÇπÂáªËÆøÈóÆÊ∫êÁΩëÈ°µÊü•Áúã",
    "rule": "rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya6aaW6aG16aKR6YGT77yMUmVib3Ju77+laG9tZV9ydWxl77+leyJmaXJzdEhlYWRlciI6ImNsYXNzIiwidGl0bGUiOiLmgLvku5PlupMiLCJhdXRob3IiOiJSZWJvcm4iLCJ1cmwiOiJoaWtlcjovL2hvbWUiLCJ2ZXJzaW9uIjozMywiY29sX3R5cGUiOiJpY29uXzIiLCJjbGFzc19uYW1lIjoiIiwiY2xhc3NfdXJsIjoiIiwiYXJlYV9uYW1lIjoiIiwiYXJlYV91cmwiOiIiLCJ5ZWFyX25hbWUiOiIiLCJ5ZWFyX3VybCI6IiIsImZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcbnZhciBtUnVsZSA9IEpTT04ucGFyc2UoZ2V0UnVsZSgpKTtcbmV2YWwoZ2V0Q3J5cHRvSlMoKSk7XG5cbi8vIOS7k+W6k+mFjee9ruacrOWcsOe8k+WtmOaWh+S7tlxudmFyIHNldHRpbmdzQ2FjaGVGaWxlID0gXCJoaWtlcjovL2ZpbGVzL2RlcG90X3YyX3NldHRpbmdzLmpzb25cIjtcbi8vIOacrOWcsOe8k+WtmOW8gOWFs1xudmFyIG5lZWRDYWNoZVNldHRpbmcgPSB0cnVlO1xuXG4vLyDku5PlupPkuKrmgKforr7nva5cbnZhciBzZXR0aW5ncyA9IHtcbiAgICAvLyDlnKjov5nph4zmt7vliqDku5PlupPphY3nva7vvIzlj6/kvb/mnKzlnLDmt7vliqDnmoTku5PlupPnva7pobZcbiAgICBhdXRob3JMaXN0OiBbXG4gICAgICAgIFwiW+S+i+WtkF3nva7pobbnp4Hkurrku5PlupNAQFJlYm9ybl8wQEBIaWtlclJ1bGVzUHJpdmFjeUBAYWNjZXNzX3Rva2VuPScqKioqJ1wiLFxuICAgICAgICBcIlvkvovlrZBd6Ieq5a6a5LmJ5paH5Lu25ZCNQEBSZWJvcm5fMEBASGlrZXJSdWxlc0RlcG90QEByZW1vdGVGaWxlbmFtZT0ndXBkYXRlXzEuanNvbidcIlxuICAgIF0sXG4gICAgcmVtb3RlQXV0aG9yTGlzdFVybDogXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvcmF3L21hc3Rlci9ydWxldmVyc2lvbi9hdXRob3JMaXN0Lmpzb25cIixcbiAgICAvLyDlnKjov5nph4zmt7vliqDku5PlupPphY3nva7vvIzlj6/kvb/mnKzlnLDmt7vliqDnmoTku5PlupPnva7lupVcbiAgICBhdXRob3JMaXN0Qm90dG9tOiBbXG4gICAgICAgIFwiW+S+i+WtkF3nva7lupXmnKzlnLDku5PlupNAQFJlYm9ybl8wQEBIaWtlclJ1bGVzUHJpdmFjeVwiXG4gICAgXSxcbiAgICAvLyDlnKjov5nph4zmt7vliqDpmo/mnLrlpLTlg49cbiAgICBwaWNVcmxMaXN0OiBbXG4gICAgICAgIFwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2MjQmc2l6ZT0xMjhcIixcbiAgICAgICAgXCJodHRwczovL3d3dy5lYXN5aWNvbi5uZXQvYXBpL3Jlc2l6ZUFwaS5waHA/aWQ9MTI3MTY0NyZzaXplPTEyOFwiLFxuICAgICAgICBcImh0dHBzOi8vd3d3LmVhc3lpY29uLm5ldC9hcGkvcmVzaXplQXBpLnBocD9pZD0xMjY2NTM2JnNpemU9MTI4XCIsXG4gICAgICAgIFwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2NTUmc2l6ZT0xMjhcIixcbiAgICBdLFxuICAgIC8vIOmakOiXj+W8gOWFs++8jOS4jemcgOimgemakOiXj+ivt+iuvue9ruS4umZhbHNlXG4gICAgbmVlZEhpZGVSdWxlOiB0cnVlLFxuICAgIC8vIOiHquihjOa3u+WKoOimgemakOiXj+eahOagh+iusO+8jOagvOW8j+S4uu+8mltcIlvmoIforrDlkI0xXVwi77yMXCJb5qCH6K6w5ZCNMl1cIi4uLl1cbiAgICBoaWRlU3ltYm9sczogW1wiW+aooeadv11cIiwgXCJb5pyq5a6M5oiQXVwiXSxcbiAgICAvLyDmgLvku5PlupPmm7TmlrDlnLDlnYBcbiAgICByZW1vdGVEZXBvdFJ1bGVVcmw6IFwiaHR0cHM6Ly9naXRlZS5jb20vcWl1c3Vuc2hpbmUyMzMvaGlrZXJWaWV3L3Jhdy9tYXN0ZXIvcnVsZXZlcnNpb24vZGVwb3RSdWxlX3YyX3JlbGVhc2UuanNvblwiLFxufTtcbi8vIOiLpeS4jeaYr+esrOS4gOasoeS9v+eUqOaAu+S7k+W6k+WImemakOiXj+W8gOWPkeaWh+aho1xudmFyIGRlcG90U3RhdHVzID0ge1xuICAgIC8vIOatpOWkhOaJgOaciemFjee9rumDveS8muiiq+S4i+aWueimhueblu+8jOivt+enu+atpeS4i+aWuemFjee9riBkZXBvdFN0YXR1cy54eHggPSB4eHg7XG59O1xudmFyIGRlcG90U2V0dGluZ3MgPSB7XG59O1xudmFyIHN0YXR1c0NhY2hlRmlsZSA9ICBcImhpa2VyOi8vZmlsZXMvXCIgKyBtUnVsZS50aXRsZSArIFwiX1wiICsgbVJ1bGUuYXV0aG9yICsgXCIuanNvblwiO1xuLy8g5LuT5bqT54q25oCB57yT5a2Y5paH5Lu25Zyw5Z2AXG52YXIgc3RhdHVzQ2FjaGVGaWxlID0gc3RhdHVzQ2FjaGVGaWxlICE9IG51bGwgJiYgc3RhdHVzQ2FjaGVGaWxlICE9IFwiXCIgPyBzdGF0dXNDYWNoZUZpbGUgOiBcImhpa2VyOi8vZmlsZXMvXCIgKyBtUnVsZS50aXRsZSArIFwiX1wiICsgbVJ1bGUuYXV0aG9yICsgXCIuanNvblwiO1xuLy8g5Li+5L6LIGhpa2VyOi8vZmlsZXMvZGVwb3RTdGF0dXNfdjIuanNvblxucHV0VmFyKHtrZXk6ICdzdGF0dXNDYWNoZUZpbGUnLCB2YWx1ZTogc3RhdHVzQ2FjaGVGaWxlfSk7XG5cbnZhciBkZXBvdFN0YXR1c0ZpbGUgPSBmZXRjaChzdGF0dXNDYWNoZUZpbGUsIHt9KTtcbmlmIChkZXBvdFN0YXR1c0ZpbGUgIT0gXCJcIikge1xuICAgIGV2YWwoXCJkZXBvdFN0YXR1cz1cIiArIGRlcG90U3RhdHVzRmlsZSk7XG59XG4vLyDku5PlupPphY3nva7ov5znqIvlnLDlnYDvvIzor7foh6rooYzphY3nva5cbi8vIOS4vuS+i++8mmh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9yYXcvbWFzdGVyL2RlcG90X3YyX3NldHRpbmdzLmpzb25cbmRlcG90U3RhdHVzLnNldHRpbmdzUmVtb3RlRmlsZSA9IFwiXCI7XG5cbi8vIOiLpemcgOimgeawuOS5heaYvuekuuW8gOWPkeaWh+aho++8jOWImeWPlua2iOazqOmHilxuLy8gZGVwb3RTdGF0dXMuc2hvd0RldkRvYyA9IHRydWU7XG4vLyDoi6XpnIDopoHmsLjkuYXmmL7npLrmj5DnpLrvvIzliJnlj5bmtojms6jph4pcbi8vIGRlcG90U3RhdHVzLnNob3dUaXBzID0gdHJ1ZTtcbi8vIOiLpemcgOimgeawuOS5heaYvuekuuS+i+WtkO+8jOWImeWPlua2iOazqOmHilxuLy8gZGVwb3RTdGF0dXMuc2hvd0V0YyA9IHRydWU7XG5cbmZ1bmN0aW9uIHdyaXRlT2JqZWN0VG9GaWxlKGZpbGVVcmwsIG9iamVjdCkge1xuICAgIHdyaXRlRmlsZShmaWxlVXJsLCBKU09OLnN0cmluZ2lmeShvYmplY3QpKTtcbn1cblxuLy8g5oqK5oC75LuT5bqT54q25oCB5YaZ5YWl5paH5Lu2XG5mdW5jdGlvbiB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKSB7XG4gICAgd3JpdGVPYmplY3RUb0ZpbGUoc3RhdHVzQ2FjaGVGaWxlLCBkZXBvdFN0YXR1cyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlU2V0dGluZ3NUb0ZpbGUoc2V0dGluZ3MpIHtcbiAgICBkZXBvdFNldHRpbmdzLmZpbmRfcnVsZV9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHdyaXRlT2JqZWN0VG9GaWxlKHNldHRpbmdzQ2FjaGVGaWxlLCBkZXBvdFNldHRpbmdzKTtcbn1cblxuLy8g5ZCI5bm25a+56LGhXG5mdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBmb3IgKHZhciBvYmogaW4gc291cmNlKSB7XG4gICAgICAgIHRhcmdldFtvYmpdID0gc291cmNlW29ial07XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIGdldFNldHRpbmdzQ29udGVudChzZXR0aW5nc0ZpbGVVcmwsIGlzUmVtb3RlKSB7XG4gICAgaWYgKHNldHRpbmdzRmlsZVVybCA9PSBcIlwiKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHNldHRpbmdzQ2FjaGVGaWxlQ29udGVudCA9IGZldGNoKHNldHRpbmdzRmlsZVVybCwge30pO1xuICAgIGlmIChzZXR0aW5nc0NhY2hlRmlsZUNvbnRlbnQgIT0gbnVsbCAmJiBzZXR0aW5nc0NhY2hlRmlsZUNvbnRlbnQgIT0gXCJcIikge1xuICAgICAgICBldmFsKFwidmFyIHNldHRpbmdzVGVtcD1cIiArIHNldHRpbmdzQ2FjaGVGaWxlQ29udGVudCk7XG4gICAgICAgIGlmIChzZXR0aW5nc1RlbXAuZmluZF9ydWxlX3NldHRpbmdzICE9IG51bGwgJiYgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NUZW1wLmZpbmRfcnVsZV9zZXR0aW5ncykgIT0gXCJ7fVwiKSB7XG4gICAgICAgICAgICBkZXBvdFNldHRpbmdzID0gc2V0dGluZ3NUZW1wO1xuICAgICAgICAgICAgZXh0ZW5kKHNldHRpbmdzLCBzZXR0aW5nc1RlbXAuZmluZF9ydWxlX3NldHRpbmdzKTtcbiAgICAgICAgICAgIGlmIChpc1JlbW90ZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzTUQ1Tm93ID0gQ3J5cHRvSlMuTUQ1KEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSkudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLkhleCk7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzTUQ1Tm93ICE9IGRlcG90U3RhdHVzLmNhY2hlRmluZFJ1bGVTZXR0aW5nc01ENSkge1xuICAgICAgICAgICAgICAgICAgICBkZXBvdFN0YXR1cy5jYWNoZUZpbmRSdWxlU2V0dGluZ3NNRDUgPSBzZXR0aW5nc01ENU5vdztcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlU2V0dGluZ3NUb0ZpbGUoc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIOWFiOivu+acrOWcsOWGjeivu+i/nOeoi++8jOi/nOeoi+eCuOS6hueUqOacrOWcsO+8jOacrOWcsOeCuOS6hueUqOm7mOiupO+8m+acrOWcsOe8k+WtmOi/nOeoi+aXtuWFiOavlOWvuW1kNeS4jeS4gOiHtOWGjee8k+WtmFxuaWYgKG5lZWRDYWNoZVNldHRpbmcgPT0gdHJ1ZSkgZ2V0U2V0dGluZ3NDb250ZW50KHNldHRpbmdzQ2FjaGVGaWxlLCBmYWxzZSk7XG5nZXRTZXR0aW5nc0NvbnRlbnQoZGVwb3RTdGF0dXMuc2V0dGluZ3NSZW1vdGVGaWxlLCB0cnVlKTtcblxudmFyIHJlbW90ZUF1dGhvckxpc3QgPSBbXTtcbnRyeSB7XG4gICAgZXZhbChcInJlbW90ZUF1dGhvckxpc3Q9XCIgKyBmZXRjaChzZXR0aW5ncy5yZW1vdGVBdXRob3JMaXN0VXJsLCB7fSkpO1xufSBjYXRjaCAoZSkge1xufVxuQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc2V0dGluZ3MuYXV0aG9yTGlzdCwgcmVtb3RlQXV0aG9yTGlzdCk7XG5pZiAoc2V0dGluZ3MuYXV0aG9yTGlzdEJvdHRvbS5sZW5ndGggIT0gMCkgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc2V0dGluZ3MuYXV0aG9yTGlzdCwgc2V0dGluZ3MuYXV0aG9yTGlzdEJvdHRvbSk7XG5cbmZ1bmN0aW9uIGlzSGlkZVJ1bGUocnVsZVRpdGxlKSB7XG4gICAgaWYgKHNldHRpbmdzLm5lZWRIaWRlUnVsZSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgLy8gaWYgKGhpZGVTeW1ib2xzLmxlbmd0aCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgdmFyIHJ1bGVUZW1wID0gcnVsZVRpdGxlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2V0dGluZ3MuaGlkZVN5bWJvbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHJ1bGVUZW1wLmluZGV4T2Yoc2V0dGluZ3MuaGlkZVN5bWJvbHNbaV0pICE9IC0xKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5kLnB1c2goe1xuICAgIHRpdGxlOiBcIuasoui/juadpeWIsOinhueVjOaAu+S7k+W6k1wiLFxuICAgIGRlc2M6IFwi5Zyo6L+Z6YeM77yM5L2g5Y+v5Lul55WF5ri45ZCE5Liq5aSn5L2s55qE6KeE5YiZ77yM5b+r6YCf5rWP6KeI5b+r6YCf5a+85YWlXCIsXG4gICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG59KTtcblxuaWYgKGRlcG90U3RhdHVzLnNob3dUaXBzICE9IGZhbHNlKSB7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi6aaW5qyh5a+85YWl5o+Q56S6XFxu4oCY4oCYKOS7heaYvuS4gOasoSnigJnigJlcIixcbiAgICAgICAgZGVzYzogXCLigJjigJjkuIvmi4nliLfmlrDljbPlj6/mmL7npLrku5PlupPigJnigJlcIiArIFwiXFxu6KeE5YiZ6YeM5pyJ5aW95aSa6ZqQ6JeP55qE5byA5YWz5ZOm77yBXCIgKyBcIlxcbuKAmOKAmOaPkOS+m+eahOS+i+WtkOS5n+S7heaYvuS4gOasoeKAmeKAmVwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbiAgICBkZXBvdFN0YXR1cy5zaG93VGlwcyA9IGZhbHNlO1xuICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xufSBlbHNlIHtcblxuICAgIGlmIChkZXBvdFN0YXR1cy5zaG93RXRjICE9IGZhbHNlIHx8IG1SdWxlLnZlcnNpb24gIT0gZGVwb3RTdGF0dXMudmVyc2lvbikge1xuICAgICAgICBkZXBvdFN0YXR1cy5zaG93RXRjID0gZmFsc2U7XG4gICAgICAgIHdyaXRlRGVwb3RTdGF0dXNUb0ZpbGUoZGVwb3RTdGF0dXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHNldHRpbmdzLmhpZGVTeW1ib2xzLnB1c2goXCJb5L6L5a2QXVwiKTtcbiAgICB9XG5cbiAgICBpZiAoZGVwb3RTdGF0dXMuc2hvd0RldkRvYyAhPSBmYWxzZSB8fCBtUnVsZS52ZXJzaW9uICE9IGRlcG90U3RhdHVzLnZlcnNpb24pIHtcbiAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIuOAkOWkp+S9rOmAmumBk+OAkVxcbuKAmOKAmCjku4XmmL7kuIDmrKEp4oCZ4oCZXCIsXG4gICAgICAgICAgICBkZXNjOiBcIuKAmOKAmOeCueWHu+afpeeci1Yy5oC75LuT5bqT5byA5Y+R5paH5qGj4oCZ4oCZXFxu6KeE5YiZ6YeM5pyJ5rC45LmF5pi+56S65byA5YWz5Y+v5Lul6Ieq5bex5Y675byAXCIsXG4gICAgICAgICAgICB1cmw6IFwiaHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc0RlcG90L2Jsb2IvbWFzdGVyL1JFQURNRS5tZCNkb2N1bWVudD1odHRwczovL2dpdGVlLmNvbS9SZWJvcm5fMC9IaWtlclJ1bGVzRGVwb3QvYmxvYi9tYXN0ZXIvUkVBRE1FLm1kXCIsXG4gICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGRlcG90U3RhdHVzLnNob3dEZXZEb2MgPSBmYWxzZTtcbiAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgfVxuXG4gICAgaWYgKG1SdWxlLnZlcnNpb24gIT0gZGVwb3RTdGF0dXMudmVyc2lvbikge1xuICAgICAgICBkZXBvdFN0YXR1cy52ZXJzaW9uID0gbVJ1bGUudmVyc2lvbjtcbiAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgfVxuXG4gICAgdmFyIGRlc2MgPSBmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICByZXR1cm4gcnVsZS5vbGRWZXJzaW9uICE9IG51bGwgJiYgcnVsZS5vbGRWZXJzaW9uIDwgcnVsZS52ZXJzaW9uID8gKFwi4oCY4oCY5pyJ5paw54mI5pys77yaXCIgKyBydWxlLnZlcnNpb24gKyBcIuKAmeKAme+8jOeCueWHu+WvvOWFpeaWsOeJiOacrFwiKSA6IHJ1bGUub2xkVmVyc2lvbiA+IHJ1bGUudmVyc2lvbiA/IFwi4oCY4oCY5Za177yf5Li65ZWl5L2g55qE6KeE5YiZ54mI5pys5q+U5oiR6L+Y6auY77yf4oCZ4oCZXCIgOiBcIuW9k+WJjeinhOWImeW3suaYr+acgOaWsOeJiO+8jOeCueWHu+i3s+WIsOinhOWImemhtVwiO1xuICAgIH07XG5cbiAgICAvLyDkuLrmiYDmnInliIbnsbvmt7vliqDmgLvku5PlupPpoblcbiAgICB0cnkge1xuICAgICAgICB2YXIgcmVtb3RlRGVwb3RSdWxlID0ge307XG4gICAgICAgIGV2YWwoXCJyZW1vdGVEZXBvdFJ1bGU9XCIgKyBmZXRjaChzZXR0aW5ncy5yZW1vdGVEZXBvdFJ1bGVVcmwsIHt9KSk7XG4gICAgICAgIHZhciBsb2NhbERlcG90UnVsZSA9IEpTT04ucGFyc2UoZ2V0UnVsZSgpKTtcbiAgICAgICAgcmVtb3RlRGVwb3RSdWxlLm9sZFZlcnNpb24gPSBsb2NhbERlcG90UnVsZS52ZXJzaW9uO1xuICAgICAgICAvL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KGxvY2FsRGVwb3RSdWxlKSk7XG4gICAgICAgIC8vc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkocmVtb3RlRGVwb3RSdWxlKSk7XG4gICAgICAgIGlmIChyZW1vdGVEZXBvdFJ1bGUub2xkVmVyc2lvbiA8IHJlbW90ZURlcG90UnVsZS52ZXJzaW9uKSB7XG4gICAgICAgICAgICBkLnB1c2goe1xuICAgICAgICAgICAgICAgIHRpdGxlOiByZW1vdGVEZXBvdFJ1bGUudGl0bGUgKyBcIlxcdFwiICsgZGVzYyhyZW1vdGVEZXBvdFJ1bGUpLFxuICAgICAgICAgICAgICAgIHVybDogXCJodHRwczovL2JhaWR1LmNvbSNcIiArIEpTT04uc3RyaW5naWZ5KHJlbW90ZURlcG90UnVsZSkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCIsXG4gICAgICAgICAgICAgICAgZGVzYzogXCLjgJDmm7TmlrDml6Xlv5fjgJFcXG7mm7TlpJrlrozmlbTml6Xlv5for7flnKjph4zpnaLngrnlh7vov5vlhaXljp/nvZHpobXmn6XnnItcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkWzBdLmRlc2MgPSBcIuKAmOKAmOeCueWHu+WPr+afpeeci+abtOaWsOaXpeW/l+KAmeKAmTxicj5cIiArIGRbMF0uZGVzYztcbiAgICAgICAgICAgIGRbMF0udXJsID0gXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvYmxvYi9tYXN0ZXIvcnVsZXZlcnNpb24vQ0hBTkdFTE9HX0RFUE9UUlVMRV9WMi5tZCN1cGRhdGVUZXh0PVwiICsgcmVtb3RlRGVwb3RSdWxlLnVwZGF0ZVRleHRcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgIHRpdGxlOiBcIuKAmOKAmOaAu+S7k+W6k+abtOaWsOeoi+W6j+W3suaNn+Wdj+KAmeKAmVwiLFxuICAgICAgICAgICAgZGVzYzogXCLor7fogZTns7sgXCIgKyBtUnVsZS5hdXRob3IgKyBcIiDkv67lpI1cIixcbiAgICAgICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIixcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5hdXRob3JMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChpc0hpZGVSdWxlKHNldHRpbmdzLmF1dGhvckxpc3RbaV0pKSB7XG4gICAgICAgICAgICBzZXR0aW5ncy5hdXRob3JMaXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwaWNVcmwgPSBudWxsO1xuICAgICAgICB2YXIgcGljVXJsSlMgPSBzZXR0aW5ncy5hdXRob3JMaXN0W2ldLm1hdGNoKC9waWNVcmw9LltcXHNcXFNdKj8nLykgKyBcIjtcIjtcbiAgICAgICAgZXZhbChwaWNVcmxKUyk7XG4gICAgICAgIGlmIChwaWNVcmwgPT0gbnVsbCkgcGljVXJsID0gc2V0dGluZ3MucGljVXJsTGlzdFtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzZXR0aW5ncy5waWNVcmxMaXN0Lmxlbmd0aCldO1xuICAgICAgICAvLyBzZXRFcnJvcihwaWNVcmwpXG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogc2V0dGluZ3MuYXV0aG9yTGlzdFtpXS5zcGxpdChcIkBAXCIpWzBdLFxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vYmFpZHUuY29tI1wiICsgc2V0dGluZ3MuYXV0aG9yTGlzdFtpXSxcbiAgICAgICAgICAgIHBpY191cmw6IHBpY1VybFxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIHNldEVycm9yKEpTT04uc3RyaW5naWZ5KGQpKTtcbnJlcy5kYXRhID0gZDtcbnNldEhvbWVSZXN1bHQocmVzKTsiLCJzZWFyY2hfdXJsIjoiIiwidGl0bGVDb2xvciI6IiNmZmYyMGMwMCIsImdyb3VwIjoiI++4j+KDo+mmlumhtSIsInNlYXJjaEZpbmQiOiIiLCJkZXRhaWxfY29sX3R5cGUiOiJ0ZXh0XzEiLCJkZXRhaWxfZmluZF9ydWxlIjoianM6XG52YXIgcmVzID0ge307XG52YXIgZCA9IFtdO1xuZXZhbChnZXRDcnlwdG9KUygpKTtcblxuLy8g5LuT5bqT6YWN572u5pys5Zyw57yT5a2Y5paH5Lu2XG52YXIgc2V0dGluZ3NDYWNoZUZpbGUgPSBcImhpa2VyOi8vZmlsZXMvZGVwb3RfdjJfc2V0dGluZ3MuanNvblwiO1xuLy8g5pys5Zyw57yT5a2Y5byA5YWzXG52YXIgbmVlZENhY2hlU2V0dGluZyA9IHRydWU7XG5cbi8vIOS7k+W6k+S4quaAp+iuvue9rlxudmFyIHNldHRpbmdzID0ge1xuICAgIC8vIOiuvue9riB0cnVlIOS4gOmUruWHgOWMlu+8jOmZpOS6huinhOWImeWSjOS7k+W6k+mAmuefpe+8jOWVpeS5n+S4jeimgVxuICAgIGhpZGVBbGw6IGZhbHNlLFxuICAgIC8vIOWwj+S7k+W6k+agh+mimOW8gOWFs++8iOazqOaEj+S6i+mhueS4iumdoumCo+S4qu+8ie+8jOS4jemcgOimgeaYvuekuuivt+iuvue9ruS4unRydWVcbiAgICBub1RpdGxlOiB0cnVlLFxuICAgIC8vIOazqOaEj+S6i+mhueW8gOWFs++8jOS4jemcgOimgeaYvuekuuivt+iuvue9ruS4unRydWVcbiAgICBub1dhcm5pbmc6IGZhbHNlLFxuICAgIC8vIOinhOWImeaVsOmHj+aYvuekuuW8gOWFs++8jOS4jemcgOimgeaYvuekuuivt+iuvue9ruS4unRydWVcbiAgICBub1J1bGVzTnVtOiBmYWxzZSxcbiAgICAvLyDmmK/lkKblhYHorrjotoXov4fkuIDlrprop4TliJnmlbDlkI7mlLnlj5jmmL7npLrmoLflvI/vvIzpu5jorqTkuI3lvIDlkK9cbiAgICBuZWVkQ2hhbmdlU2hvd1R5cGU6IGZhbHNlLFxuICAgIC8vIOiuvue9ruacgOWkp+aYvuekuuWujOaVtOaWh+acrOeahOinhOWImeaVsO+8jOWkp+S6juiuvue9ruWAvOWImeaYvuekuuS4uuaMiemSruagt+W8jyjpu5jorqQgdGV4dF8yKVxuICAgIHNob3dGdWxsVGV4dE1heDogMTAsXG4gICAgLy8g6K6+572u6LaF6L+H5YWB6K645pi+56S65a6M5pW05paH5pys55qE6KeE5YiZ5pWw5ZCO5pi+56S655qE5qC35byPXG4gICAgb3Zlck1heFNob3dUeXBlOiBcInRleHRfMlwiLFxuICAgIC8qKlxuICAgICAqIOinhOWImeaYoOWwhOWIl+ihqFxuICAgICAqIOW3puacrOWcsO+8jOWPs+i/nOerr++8jOacrOWcsOaYoOWwhOS4uui/nOerr++8jOi+vuWIsOabv+aNouWGheWuueeahOebrueahFxuICAgICAqIOmcgOimgeWFqOWQjeWMuemFjemcgOimgeWcqOaYoOWwhOihqOS4reWKoOWFpXsgXCJtYXRjaEFsbFwiOiB0cnVlIH1cbiAgICAgKiDvvIjms6jmhI/vvIznqIvluo/pgLvovpHkuLrlhYjmmKDlsITlkI7miafooYzkuIvpnaLnmoTliKDpmaTmoIforrDvvIlcbiAgICAgKi9cbiAgICBydWxlc01hcHBpbmc6IFtcbiAgICAgICAgLy8gW3tcInRpdGxlXCI6IFwi5Zeo5ZOG5ZKqXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9LCB7XCJ0aXRsZVwiOiBcIuWXqOWTmuWSquW9seinhlwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifSwge1wibWF0Y2hBbGxcIjogdHJ1ZX1dLFxuICAgICAgICAvLyBbe1widGl0bGVcIjogXCLpooTlkYrniYdcIiwgXCJhdXRob3JcIjogXCJSZWJvcm5cIn0sIHtcInRpdGxlXCI6IFwi6aKE5ZGK54mHKD894oCiUmUpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9XSxcbiAgICAgICAgLy8gW3tcInRpdGxlXCI6IFwi6aKE5ZGK54mH4oCiVFwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifSwge1widGl0bGVcIjogXCLpooTlkYrniYfigKJSZVwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifV0sXG4gICAgICAgIC8vIFt7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAolQpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9LCB7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAolJlKVwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifV0sXG4gICAgICAgIC8vIFt7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAokIpXCIsIFwiYXV0aG9yXCI6IFwiUmVib3JuXCJ9LCB7XCJ0aXRsZVwiOiBcIi4qPyg/PeKAolJlKVwiLCBcImF1dGhvclwiOiBcIlJlYm9yblwifV1cbiAgICBdLFxuICAgIC8vIOS6keerr+inhOWImeaYoOWwhOWIl+ihqOmTvuaOpe+8jOWGheWuueagvOW8j+aYr0pTT07mlbDnu4TvvIzor7foh6rlt7Horr7nva5cbiAgICByZW1vdGVSdWxlc01hcHBpbmdVcmw6IFwiXCIsXG4gICAgLy8g5YWl5oiP5byA5YWz77yf77yI5ruR56i977yJLy8g5Yig6Zmk5byA5YWz77yM5LiN6ZyA6KaB5Yig6Zmk6K+36K6+572u5Li6ZmFsc2VcbiAgICBuZWVkRGVsU3ltYm9sOiB0cnVlLFxuICAgIC8vIOiHquihjOa3u+WKoOimgeiiq+WIoOaOieeahOagh+iusFxuICAgIHN5bWJvbHM6IFtcIuagh+iusDFcIiwgXCLmoIforrAyXCJdLFxuICAgIC8vIOmakOiXj+W8gOWFs++8jOS4jemcgOimgemakOiXj+ivt+iuvue9ruS4umZhbHNlXG4gICAgbmVlZEhpZGVSdWxlOiB0cnVlLFxuICAgIC8vIOiHquihjOa3u+WKoOimgemakOiXj+eahOagh+iusO+8jOagvOW8j+S4uu+8mlvmoIforrDlkI1dXG4gICAgaGlkZVN5bWJvbHM6IFtcIlvmqKHmnb9dXCIsIFwiW+acquWujOaIkF1cIl0sXG4gICAgLy8g5piv5ZCm6ZqQ6JeP5L6L5a2Q77yM6ZyA6KaB6ZqQ6JeP6K+36K6+572u5Li6dHJ1ZVxuICAgIG5lZWRIaWRlRXRjOiBmYWxzZSxcblxuICAgIC8vIOiLpemcgOimgeWFs+mXreW/veeVpeacrOasoeabtOaWsOivt+iuvue9ruS4unRydWVcbiAgICBub0lnbm9yZVVwZGF0ZTogZmFsc2UsXG4gICAgLy8g5pys5Zyw5b+955Wl5pu05paw5YiX6KGo77yMXG4gICAgLy8g5YaF5a655qih5p2/5Li6IHt0aXRsZTogXCLop4TliJnlkI1cIiwgYXV0aG9yOiBcIuinhOWImeS9nOiAhVwifVxuICAgIGlnbm9yZVVwZGF0ZVJ1bGVMaXN0OiBbXG4gICAgICAgIC8vIHt0aXRsZTogXCLpooTlkYrniYfigKJSZVwiLCBhdXRob3I6IFwiUmVib3JuXCJ9LFxuICAgIF0sXG4gICAgLy8g5LqR56uv5b+955Wl5pu05paw5YiX6KGo6ZO+5o6l77yM5qC85byP5pivSlNPTuaVsOe7hO+8jOivt+iHquW3seiuvue9rlxuICAgIHJlbW90ZUlnbm9yZUxpc3RVcmw6IFwiXCIsXG4gICAgLy8g5Y+C6ICD6ZO+5o6l77yaXG4gICAgLy8gaHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc0RlcG90L3Jhdy9tYXN0ZXIvaWdub3JlVXBkYXRlUnVsZUxpc3QuanNvblxuICAgIC8vIGh0dHBzOi8vZ2l0ZWUuY29tL3FpdXN1bnNoaW5lMjMzL2hpa2VyVmlldy9yYXcvbWFzdGVyL3J1bGV2ZXJzaW9uL1JlYm9ybi9pZ25vcmVVcGRhdGVSdWxlTGlzdC5qc29uXG59O1xuLy8g5rOo5oSP5LqL6aG55paH5a2XXG52YXIgd2FyaW5nVGV4dCA9IFwiMS4g5L+d5a2Y5ZCO6ZyA6KaB5omL5Yqo5LiL5ouJ5Yi35paw5omN6IO95pu05paw6KeE5YiZ54q25oCBXCIgKyBcIlxcbjIuIOaMiemSruW9oueKtueahOinhOWImeaYr+WkhOS6juacgOaWsOeJiOacrOeahO+8jOeCueWHu+WPr+i3s+i9rOiHs+inhOWImemhtVwiO1xuLy8g6aaW5qyh5a+85YWl5paH5a2XXG52YXIgZmlyc3RJbXBvcnRUZXh0ID0gXCIxLuKAmOKAmOS4i+aLieWIt+aWsOWNs+WPr+aYvuekuuS7k+W6k+inhOWImeKAmeKAmVwiICsgXCJcXG4yLuS6jOe6p+inhOWImeS4rSBuZWVkQ2hhbmdlU2hvd1R5cGUg5Y+v6K6+572u5pi+56S65qC35byPXCIgKyBcIlxcbjMu5LqM57qn6KeE5YiZ5LitIGhpZGVBbGwg5Y+v6K6+572u5LiA6ZSu6ZqQ6JeP5qCH6aKY5ZKM5rOo5oSP5LqL6aG5XCI7XG52YXIgc3RhdHVzQ2FjaGVGaWxlID0gZ2V0VmFyKCdzdGF0dXNDYWNoZUZpbGUnKTtcbi8vIOiLpeS4jeaYr+esrOS4gOasoeS9v+eUqOaAu+S7k+W6k+WImeWtmOWCqOS7k+W6k+eKtuaAgVxudmFyIGRlcG90U3RhdHVzID0ge1xuICAgIC8vIOatpOWkhOaJgOaciemFjee9rumDveS8muiiq+S4i+aWueimhueblu+8jOivt+enu+atpeS4i+aWuemFjee9riBkZXBvdFN0YXR1cy54eHggPSB4eHg7XG59O1xudmFyIGRlcG90U2V0dGluZ3MgPSB7fTtcblxuaWYgKHNldHRpbmdzLm5lZWRIaWRlRXRjID09IHRydWUpIHNldHRpbmdzLmhpZGVTeW1ib2xzLnB1c2goXCJb5L6L5a2QXVwiKTtcblxuLy8g5LuT5bqT54q25oCB57yT5a2Y5paH5Lu25Zyw5Z2AXG5pZiAoc3RhdHVzQ2FjaGVGaWxlID09IG51bGwgfHwgc3RhdHVzQ2FjaGVGaWxlID09IFwiXCIpIHN0YXR1c0NhY2hlRmlsZSA9IFwiaGlrZXI6Ly9maWxlcy9kZXBvdFN0YXR1c192Mi5qc29uXCI7XG4vLyDkuL7kvosgaGlrZXI6Ly9maWxlcy9kZXBvdFN0YXR1c192Mi5qc29uXG5cbnZhciBkZXBvdFN0YXR1c0ZpbGUgPSBmZXRjaChzdGF0dXNDYWNoZUZpbGUsIHt9KTtcbmlmIChkZXBvdFN0YXR1c0ZpbGUgIT0gXCJcIikge1xuICAgIGV2YWwoXCJkZXBvdFN0YXR1cz1cIiArIGRlcG90U3RhdHVzRmlsZSk7XG59XG5cbi8vIOS7k+W6k+mFjee9rui/nOeoi+WcsOWdgO+8jOivt+iHquihjOmFjee9rlxuLy8g5Li+5L6L77yaaHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc0RlcG90L3Jhdy9tYXN0ZXIvZGVwb3RfdjJfc2V0dGluZ3MuanNvblxuZGVwb3RTdGF0dXMuc2V0dGluZ3NSZW1vdGVGaWxlID0gXCJcIjtcblxuLy8g6Iul6ZyA6KaB5rC45LmF5pi+56S65o+Q56S677yM5YiZ5Y+W5raI5rOo6YeKXG4vLyBkZXBvdFN0YXR1cy5zaG93U2Vjb25kTGlzdFRpcHMgPSB0cnVlO1xuXG5mdW5jdGlvbiB3cml0ZU9iamVjdFRvRmlsZShmaWxlVXJsLCBvYmplY3QpIHtcbiAgICB3cml0ZUZpbGUoZmlsZVVybCwgSlNPTi5zdHJpbmdpZnkob2JqZWN0KSk7XG59XG5cbi8vIOaKiuaAu+S7k+W6k+eKtuaAgeWGmeWFpeaWh+S7tlxuZnVuY3Rpb24gd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cykge1xuICAgIHdyaXRlT2JqZWN0VG9GaWxlKHN0YXR1c0NhY2hlRmlsZSwgZGVwb3RTdGF0dXMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZVNldHRpbmdzVG9GaWxlKHNldHRpbmdzKSB7XG4gICAgZGVwb3RTZXR0aW5ncy5kZXRhaWxfZmluZF9ydWxlX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgd3JpdGVPYmplY3RUb0ZpbGUoc2V0dGluZ3NDYWNoZUZpbGUsIGRlcG90U2V0dGluZ3MpO1xufVxuXG4vLyDlkIjlubblr7nosaFcbmZ1bmN0aW9uIGV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xuICAgIGZvciAodmFyIG9iaiBpbiBzb3VyY2UpIHtcbiAgICAgICAgdGFyZ2V0W29ial0gPSBzb3VyY2Vbb2JqXTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gZ2V0U2V0dGluZ3NDb250ZW50KHNldHRpbmdzRmlsZVVybCwgaXNSZW1vdGUpIHtcbiAgICBpZiAoc2V0dGluZ3NGaWxlVXJsID09IFwiXCIpIHJldHVybiBmYWxzZTtcbiAgICB2YXIgc2V0dGluZ3NDYWNoZUZpbGVDb250ZW50ID0gZmV0Y2goc2V0dGluZ3NGaWxlVXJsLCB7fSk7XG4gICAgaWYgKHNldHRpbmdzQ2FjaGVGaWxlQ29udGVudCAhPSBudWxsICYmIHNldHRpbmdzQ2FjaGVGaWxlQ29udGVudCAhPSBcIlwiKSB7XG4gICAgICAgIGV2YWwoXCJ2YXIgc2V0dGluZ3NUZW1wPVwiICsgc2V0dGluZ3NDYWNoZUZpbGVDb250ZW50KTtcbiAgICAgICAgaWYgKHNldHRpbmdzVGVtcC5kZXRhaWxfZmluZF9ydWxlX3NldHRpbmdzICE9IG51bGwgJiYgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3NUZW1wLmRldGFpbF9maW5kX3J1bGVfc2V0dGluZ3MpICE9IFwie31cIikge1xuICAgICAgICAgICAgZGVwb3RTZXR0aW5ncyA9IHNldHRpbmdzVGVtcDtcbiAgICAgICAgICAgIGV4dGVuZChzZXR0aW5ncywgc2V0dGluZ3NUZW1wLmRldGFpbF9maW5kX3J1bGVfc2V0dGluZ3MpO1xuICAgICAgICAgICAgaWYgKGlzUmVtb3RlID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2V0dGluZ3NNRDVOb3cgPSBDcnlwdG9KUy5NRDUoSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpKS50b1N0cmluZyhDcnlwdG9KUy5lbmMuSGV4KTtcbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3NNRDVOb3cgIT0gZGVwb3RTdGF0dXMuY2FjaGVEZXRhaWxGaW5kUnVsZVNldHRpbmdzTUQ1KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcG90U3RhdHVzLmNhY2hlRGV0YWlsRmluZFJ1bGVTZXR0aW5nc01ENSA9IHNldHRpbmdzTUQ1Tm93O1xuICAgICAgICAgICAgICAgICAgICB3cml0ZURlcG90U3RhdHVzVG9GaWxlKGRlcG90U3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVTZXR0aW5nc1RvRmlsZShzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBUT0RPIOebruWJjeS8muWvvOiHtOS4gOaXpuS7k+W6k+mFjee9rueahOacrOWcsOe8k+WtmOS6p+eUn++8jOWImeaXoOazleabtOaUuem7mOiupOmFjee9ruS4reWQjOWtl+auteWGheWuueeahOmXrumimFxuLy8g6buY6K6k6YWN572u5LiO5pys5Zyw57yT5a2YL+S6keerr+WQiOW5tuWGheWuueeahOaWueW8j++8jOS7peacrOWcsOe8k+WtmC/kupHnq6/kuLrkuLvvvIjlkIjlubbkvJjlhYjnuqfkuLrvvJrkupHnq68tPuacrOWcsOe8k+WtmC0+6buY6K6k6YWN572u77yJXG4vLyDlhYjor7vmnKzlnLDlho3or7vkupHnq6/vvIzkupHnq6/ngrjkuobnlKjmnKzlnLDvvIzmnKzlnLDngrjkuobnlKjpu5jorqTvvJvmnKzlnLDnvJPlrZjkupHnq6/ml7blhYjmr5Tlr7ltZDXkuI3kuIDoh7Tlho3nvJPlrZhcbmlmIChuZWVkQ2FjaGVTZXR0aW5nID09IHRydWUpIGdldFNldHRpbmdzQ29udGVudChzZXR0aW5nc0NhY2hlRmlsZSwgZmFsc2UpO1xuZ2V0U2V0dGluZ3NDb250ZW50KGRlcG90U3RhdHVzLnNldHRpbmdzUmVtb3RlRmlsZSwgdHJ1ZSk7XG5cbnZhciByZW1vdGVJZ25vcmVMaXN0ID0gW107XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVJZ25vcmVMaXN0PVwiICsgZmV0Y2goc2V0dGluZ3MucmVtb3RlSWdub3JlTGlzdFVybCwge30pKTtcbn0gY2F0Y2ggKGUpIHtcbn1cbkFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHNldHRpbmdzLmlnbm9yZVVwZGF0ZVJ1bGVMaXN0LCByZW1vdGVJZ25vcmVMaXN0KTtcbi8vIHNldEVycm9yKEpTT04uc3RyaW5naWZ5KHJlbW90ZUlnbm9yZUxpc3QpKTtcblxuXG52YXIgcmVtb3RlUnVsZXNNYXBwaW5nID0gW107XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVSdWxlc01hcHBpbmc9XCIgKyBmZXRjaChzZXR0aW5ncy5yZW1vdGVSdWxlc01hcHBpbmdVcmwsIHt9KSk7XG59IGNhdGNoIChlKSB7XG59XG5BcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShzZXR0aW5ncy5ydWxlc01hcHBpbmcsIHJlbW90ZVJ1bGVzTWFwcGluZyk7XG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShydWxlc01hcHBpbmcpKTtcblxuXG4vKipcbiAqIOWPr+WcqOatpOWkhOiHquWumuS5ieS7k+W6k++8jOWunueOsOengeS6uuS7k+W6k1xuICpcbiAqIOS7pVJlYm9ybuS7k+W6k+eahOmTvuaOpeS4uuWPguiAg1xuICpcbiAqIGh0dHBzOi8vZ2l0ZWUuY29tL1JlYm9ybl8wL0hpa2VyUnVsZXNEZXBvdC9ibG9iL21hc3Rlci91cGRhdGUuanNvblxuICovXG52YXIgYXV0aG9yTGlzdCA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXTtcbnZhciBhdXRob3JBbmRPd25lckFuZFByb2plY3QgPSBhdXRob3JMaXN0LnNwbGl0KFwiQEBcIik7XG52YXIgYXV0aG9yID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzBdO1xudmFyIHJlbW90ZVVybCA9IFwiXCI7XG5cbnZhciBhcGlUeXBlID0gXCIxXCI7ICAvLyAwIOS4uuaWh+S7tuebtOmTvu+8jDEg5Li656CB5LqRQVBJXG52YXIgYXBpVHlwZUpTID0gYXV0aG9yTGlzdC5tYXRjaCgvYXBpVHlwZT0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuZXZhbChhcGlUeXBlSlMpO1xuaWYgKGFwaVR5cGUgPT0gbnVsbCkgYXBpVHlwZSA9IFwiMVwiO1xuXG5pZiAoYXBpVHlwZSA9PSBcIjBcIikge1xuICAgIHZhciBmdWxsVXJsID0gXCJcIjtcbiAgICB2YXIgZnVsbFVybEpTID0gYXV0aG9yTGlzdC5tYXRjaCgvZnVsbFVybD0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgIGV2YWwoZnVsbFVybEpTKTtcbiAgICByZW1vdGVVcmwgPSBmdWxsVXJsO1xufSBlbHNlIGlmIChhcGlUeXBlID09IFwiMVwiKSB7XG4gICAgdmFyIHJlbW90ZUFwaUhvbWUgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy9cIjtcbiAgICB2YXIgb3duZXIgPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMV07ICAgLy8g5LuT5bqT5oul5pyJ6ICFXG4gICAgdmFyIHJlcG8gPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMl07IC8vIOS7k+W6k+WQjVxuICAgIHZhciByZW1vdGVGaWxlbmFtZSA9IG51bGw7IC8vIOaWh+S7tuWQjVxuICAgIHZhciBwYXRoID0gcmVtb3RlRmlsZW5hbWU7ICAvLyDlnKjku5PlupPkuK3mlofku7bnmoTot6/lvoRcbiAgICB2YXIgYWNjZXNzX3Rva2VuID0gbnVsbDsgIC8vIOeUqOaIt+aOiOadg+egge+8jOWcqOeggeS6kVwi6K6+572u4oCUPuWuieWFqOiuvuWumi0+5Liq5Lq66K6/6Zeu5Luk54mMXCLkuK3lj6/ku6XnlJ/miJBcbiAgICB2YXIgdG9rZW5KUyA9IGF1dGhvckxpc3QubWF0Y2goL2FjY2Vzc190b2tlbj0uW1xcc1xcU10qPycvKSArIFwiO1wiO1xuICAgIGV2YWwodG9rZW5KUyk7XG4gICAgLy8gc2V0RXJyb3IoYWNjZXNzX3Rva2VuPT1udWxsKTtcbiAgICB2YXIgcmVtb3RlRmlsZW5hbWVKUyA9IGF1dGhvckxpc3QubWF0Y2goL3JlbW90ZUZpbGVuYW1lPS5bXFxzXFxTXSo/Jy8pICsgXCI7XCI7XG4gICAgZXZhbChyZW1vdGVGaWxlbmFtZUpTKTtcbiAgICBpZiAocmVtb3RlRmlsZW5hbWUgPT0gbnVsbCkge1xuICAgICAgICByZW1vdGVGaWxlbmFtZSA9IFwidXBkYXRlLmpzb25cIjtcbiAgICB9XG4gICAgcGF0aCA9IHJlbW90ZUZpbGVuYW1lO1xuICAgIC8vIHNldEVycm9yKHJlbW90ZUZpbGVuYW1lKVxuICAgIC8vIEFQSemTvuaOpeWPguiAg++8mmh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy97e293bmVyfX0ve3tyZXBvfX0vY29udGVudHMve3twYXRofX0/YWNjZXNzX3Rva2VuPSoqKipcbiAgICByZW1vdGVVcmwgPSByZW1vdGVBcGlIb21lICsgb3duZXIgKyBcIi9cIiArIHJlcG8gKyBcIi9jb250ZW50cy9cIiArIHBhdGg7XG4gICAgaWYgKGFjY2Vzc190b2tlbiAhPSBudWxsKSB7XG4gICAgICAgIHJlbW90ZVVybCA9IHJlbW90ZVVybCArIFwiP2FjY2Vzc190b2tlbj1cIiArIGFjY2Vzc190b2tlbjtcbiAgICB9XG4gICAgLy8gc2V0RXJyb3IocmVtb3RlVXJsKTtcbiAgICAvLyB2YXIgcmVtb3RlSG9tZSA9IFwiaHR0cHM6Ly9naXRlZS5jb20vXCIgKyBvd25lciArIFwiL1wiICsgcmVwbyArIFwiL2Jsb2IvbWFzdGVyL3VwZGF0ZS5qc29uXCI7XG59XG5cbmlmIChnZXRVcmwoKS5pbmRleE9mKFwicnVsZTovL1wiKSAhPSAtMSkge1xuICAgIHZhciByZW1vdGVEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi5pu05paw5pel5b+XICjngrnlh7vlj6/mn6XnnIvlrozmlbTml6Xlv5cpXCIsXG4gICAgICAgIGRlc2M6IHJlbW90ZURlcG90UnVsZS51cGRhdGVUZXh0LFxuICAgICAgICB1cmw6IFwiaHR0cHM6Ly9naXRlZS5jb20vcWl1c3Vuc2hpbmUyMzMvaGlrZXJWaWV3L2Jsb2IvbWFzdGVyL3J1bGV2ZXJzaW9uL0NIQU5HRUxPR19ERVBPVFJVTEVfVjIubWRcIixcbiAgICAgICAgY29sX3R5cGU6IFwicGljXzFcIlxuICAgIH0pO1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIueCueWHu+abtOaWsOaAu+S7k+W6k1wiLFxuICAgICAgICB1cmw6IHJlbW90ZURlcG90UnVsZS5ydWxlLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbn0gZWxzZSBpZiAoZ2V0VXJsKCkuaW5kZXhPZihcInVwZGF0ZVRleHQ9XCIpICE9IC0xKSB7XG4gICAgdmFyIHVwZGF0ZVRleHQgPSBudWxsO1xuICAgIC8vIHVwZGF0ZVRleHRKUyA9IFwidXBkYXRlVGV4dD0nXCIgKyBnZXRVcmwoKS5zcGxpdChcIiNcIilbMV0ucmVwbGFjZShcInVwZGF0ZVRleHQ9XCIsIFwiXCIpICsgXCInO1wiO1xuICAgIC8vIGV2YWwodXBkYXRlVGV4dEpTKTtcbiAgICB1cGRhdGVUZXh0ID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdLnJlcGxhY2UoXCJ1cGRhdGVUZXh0PVwiLCBcIlwiKTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLmm7TmlrDml6Xlv5cgKOeCueWHu+WPr+afpeeci+WujOaVtOaXpeW/lylcIixcbiAgICAgICAgZGVzYzogdXBkYXRlVGV4dCAhPSBudWxsID8gdXBkYXRlVGV4dCA6IFwi5pqC5peg5pu05paw5pel5b+XXCIsXG4gICAgICAgIHVybDogXCJodHRwczovL2dpdGVlLmNvbS9xaXVzdW5zaGluZTIzMy9oaWtlclZpZXcvYmxvYi9tYXN0ZXIvcnVsZXZlcnNpb24vQ0hBTkdFTE9HX0RFUE9UUlVMRV9WMi5tZFwiLFxuICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG59IGVsc2UgaWYgKGdldFVybCgpLmluZGV4T2YoXCJkb2N1bWVudD1cIikgIT0gLTEpIHtcbiAgICB2YXIgZG9jdW1lbnRVcmwgPSBudWxsO1xuICAgIGRvY3VtZW50VXJsID0gZ2V0VXJsKCkuc3BsaXQoXCIjXCIpWzFdLnJlcGxhY2UoXCJkb2N1bWVudD1cIiwgXCJcIik7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi5oC75LuT5bqT5byA5Y+R5paH5qGj5YWl5Y+jXCIsXG4gICAgICAgIGRlc2M6IFwi6L+Z5piv5LiT6Zeo57uZ5aSn5L2s5Lus5YaZ55qE77yM5paH56yU5aSq5beu5LqG77yM6KeJ5b6X5YaZ5b6X5Lmx6L+Y6K+35L2T6LCF5LiA5LiL8J+ZiOOAguacieS4jeaHgueahOWcsOaWueWPr+S7peiBlOezu+aIke+8jOa6nOS6hua6nOS6hu+9nlwiLFxuICAgICAgICB1cmw6IGRvY3VtZW50VXJsLFxuICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi54K55Ye75Y+v5p+l55yL5a6M5pW05paH5qGjXCIsXG4gICAgICAgIHVybDogZG9jdW1lbnRVcmwsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcblxuICAgIHZhciBkZXBvdFJ1bGVzU3RhdHVzID0ge1xuICAgICAgICB1cGRhdGVOdW06IDAsXG4gICAgICAgIG5vSW1wb3J0TnVtOiAwLFxuICAgICAgICBpZ25vcmVOdW06IDAsXG4gICAgICAgIHVua25vd25UeXBlTnVtOiAwXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldFJ1bGVOb1N5bWJvbHMocnVsZSwgc3ltYm9sTGlzdCkge1xuICAgICAgICBpZiAoc2V0dGluZ3MubmVlZERlbFN5bWJvbCAhPSB0cnVlKSByZXR1cm4gcnVsZTtcbiAgICAgICAgdmFyIHJ1bGVUZW1wID0gcnVsZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzeW1ib2xMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3ltYm9sUmVnID0gbmV3IFJlZ0V4cChzeW1ib2xMaXN0W2ldLCBcImdcIik7XG4gICAgICAgICAgICBydWxlVGVtcC50aXRsZSA9IHJ1bGVUZW1wLnRpdGxlLnJlcGxhY2Uoc3ltYm9sUmVnLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KHJ1bGVUZW1wKSk7XG4gICAgICAgIHJldHVybiBydWxlVGVtcDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0hpZGVSdWxlKHJ1bGUpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLm5lZWRIaWRlUnVsZSAhPSB0cnVlKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIGlmIChoaWRlU3ltYm9scy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB2YXIgcnVsZVRlbXAgPSBydWxlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLmhpZGVTeW1ib2xzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocnVsZVRlbXAudGl0bGUuaW5kZXhPZihzZXR0aW5ncy5oaWRlU3ltYm9sc1tpXSkgIT0gLTEpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyDlpoLmnpzmnKzlnLDmsqHmnInliJnmj5DnpLrlr7zlhaXmlrDop4TliJlcbiAgICAvLyDlm6Dpg6jliIbmiYvmnLrkuI3mlK/mjIFlczbor63ms5XvvIzmlYXms6jph4rmjolcbiAgICAvKnZhciBteVJ1bGVzTWFwID0gbmV3IE1hcCgpO1xuICAgIG15UnVsZXMubWFwKHJ1bGUgPT4ge1xuICAgICAgICBteVJ1bGVzTWFwLnNldChydWxlLnRpdGxlLCB0cnVlKTtcbiAgICB9KTtcbiAgICAvL3NldEVycm9yKG15UnVsZXNNYXAuZ2V0KFwi6IW+6K6v4oCiUmVcIikpOyovXG5cbiAgICBmdW5jdGlvbiBnZXRSdWxlSW5BcnJheShydWxlcywgcnVsZSkge1xuICAgICAgICBpZiAocnVsZXMgPT0gbnVsbCB8fCBydWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChydWxlc1tpXS50aXRsZSA9PSBydWxlLnRpdGxlICYmIHJ1bGVzW2ldLmF1dGhvciA9PSBhdXRob3IpIHJldHVybiBydWxlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyDljp/lp4vmlrnms5XvvIzmr5TovoPogJfml7ZcbiAgICBmdW5jdGlvbiBpc0luQXJyYXkocnVsZXMsIHJ1bGUpIHtcbiAgICAgICAgcmV0dXJuIGdldFJ1bGVJbkFycmF5KHJ1bGVzLCBydWxlKSAhPSBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzSWdub3JlVXBkYXRlUnVsZShydWxlKSB7XG4gICAgICAgIGlmIChpc0luQXJyYXkoc2V0dGluZ3MuaWdub3JlVXBkYXRlUnVsZUxpc3QsIHJ1bGUpID09IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBjYWNoZUlnbm9yZVJ1bGUgPSBnZXRSdWxlSW5BcnJheShkZXBvdFN0YXR1cy5pZ25vcmVVcGRhdGVSdWxlTGlzdCwgcnVsZSk7XG4gICAgICAgICAgICBpZiAoY2FjaGVJZ25vcmVSdWxlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVwb3RTdGF0dXMuaWdub3JlVXBkYXRlUnVsZUxpc3QgPT0gbnVsbCkgZGVwb3RTdGF0dXMuaWdub3JlVXBkYXRlUnVsZUxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICBjYWNoZUlnbm9yZVJ1bGUgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBydWxlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBhdXRob3I6IGF1dGhvcixcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogcnVsZS52ZXJzaW9uXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkZXBvdFN0YXR1cy5pZ25vcmVVcGRhdGVSdWxlTGlzdC5wdXNoKGNhY2hlSWdub3JlUnVsZSk7XG4gICAgICAgICAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUudmVyc2lvbiAhPSBjYWNoZUlnbm9yZVJ1bGUudmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZUlnbm9yZVJ1bGUudmVyc2lvbiA9IHJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldElnbm9yZVVwZGF0ZVJ1bGUocnVsZSkge1xuICAgICAgICBpZiAoaXNJZ25vcmVVcGRhdGVSdWxlKHJ1bGUpID09IHRydWUpIHJ1bGUuaXNJZ25vcmVVcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBydWxlcyA9IFtdO1xuICAgIGV2YWwoXCJydWxlcz1cIiArIGZldGNoKFwiaGlrZXI6Ly9ob21lXCIsIHt9KSk7XG4gICAgdmFyIG15UnVsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBydWxlID0gcnVsZXNbaV07XG4gICAgICAgIGlmIChydWxlLmF1dGhvciA9PSBhdXRob3IpIHtcbiAgICAgICAgICAgIG15UnVsZXMucHVzaChnZXRSdWxlTm9TeW1ib2xzKHJ1bGUsIHNldHRpbmdzLnN5bWJvbHMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldEVycm9yKEpTT04uc3RyaW5naWZ5KG15UnVsZXMpKTtcblxuICAgIGZ1bmN0aW9uIGdldFJ1bGVJblJ1bGVzV2l0aE1hcHBpbmcocnVsZXMsIHJ1bGUpIHtcbiAgICAgICAgaWYgKHJ1bGVzID09IG51bGwgfHwgcnVsZXMubGVuZ3RoID09IDAgfHwgcnVsZSA9PSBudWxsIHx8IHJ1bGUubWFwcGluZ1RpdGxlID09IG51bGwpIHJldHVybiBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocnVsZXNbaV0ubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgcnVsZXNbaV0ubWFwcGluZ1RpdGxlID09IHJ1bGUubWFwcGluZ1RpdGxlICYmIHJ1bGVzW2ldLmF1dGhvciA9PSBhdXRob3IpIHJldHVybiBydWxlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0luUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkge1xuICAgICAgICBpZiAoZ2V0UnVsZUluUnVsZXNXaXRoTWFwcGluZyhydWxlcywgcnVsZSkgIT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBkZXNjID0gZnVuY3Rpb24gKHJ1bGVzLCBydWxlKSB7XG4gICAgICAgIGlmIChydWxlICE9IG51bGwgJiYgcnVsZS52ZXJzaW9uIDwgMCkge1xuICAgICAgICAgICAgZGVwb3RSdWxlc1N0YXR1cy51bmtub3duVHlwZU51bSArPSAxO1xuICAgICAgICAgICAgcmV0dXJuIFwi5LuT5bqT5peg5rOV5qOA5rWL6K+l6KeE5YiZ57G75Z6L77yM6K+34oCY4oCY55yL6KeE5YiZ5pu05paw5pe26Ze04oCZ4oCZXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzSW5SdWxlc1dpdGhNYXBwaW5nKHJ1bGVzLCBydWxlKSA9PSB0cnVlIHx8IGlzSW5BcnJheShydWxlcywgcnVsZSkgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKHJ1bGUub2xkVmVyc2lvbiAhPSBudWxsICYmIHJ1bGUub2xkVmVyc2lvbiA8IHJ1bGUudmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGRlcG90UnVsZXNTdGF0dXMudXBkYXRlTnVtICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcIuKAmOKAmOacieaWsOeJiOacrO+8mlwiICsgcnVsZS52ZXJzaW9uICsgXCLigJnigJnvvIzngrnlh7vlr7zlhaXmlrDniYjmnKxcIilcbiAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjxicj48YnI+W+abtOaWsOaXpeW/l10gXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGUudXBkYXRlVGV4dCA9PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCLml6BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHJ1bGUudXBkYXRlVGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS50aXBzICE9IG51bGwgJiYgcnVsZS50aXBzICE9IFwiXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxicj48YnI+VGlwczogXCIgKyBydWxlLnRpcHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJ1bGUub2xkVmVyc2lvbiA+IHJ1bGUudmVyc2lvbiA/XG4gICAgICAgICAgICAgICAgICAgIFwi4oCY4oCY5Za177yf5Li65ZWl5L2g55qE6KeE5YiZ54mI5pys5q+U5oiR6L+Y6auY77yf4oCZ4oCZXCJcbiAgICAgICAgICAgICAgICAgICAgOiBcIuW9k+WJjeinhOWImeW3suaYr+acgOaWsOeJiO+8jOeCueWHu+i3s+WIsOinhOWImemhtVwiXG4gICAgICAgICAgICAgICAgICAgICsgKFxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS50aXBzICE9IG51bGwgJiYgcnVsZS50aXBzICE9IFwiXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXFxuVGlwczogXCIgKyBydWxlLnRpcHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlcG90UnVsZXNTdGF0dXMubm9JbXBvcnROdW0gKz0gMTtcbiAgICAgICAgICAgIHJldHVybiBcIuKAmOKAmOS9oOWwmuacquWvvOWFpeivpeinhOWImeKAmeKAme+8jOeCueWHu+WvvOWFpVwiXG4gICAgICAgICAgICAgICAgKyAoXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUudGlwcyAhPSBudWxsICYmIHJ1bGUudGlwcyAhPSBcIlwiID9cbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGJyPjxicj5UaXBzOiBcIiArIHJ1bGUudGlwcyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoZGVwb3RTdGF0dXMuc2hvd1NlY29uZExpc3RUaXBzICE9IGZhbHNlKSB7XG4gICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICB0aXRsZTogXCLpppbmrKHlr7zlhaXmj5DnpLpcXG7igJjigJgo5LuF5pi+5LiA5qyhKeKAmeKAmVwiLFxuICAgICAgICAgICAgZGVzYzogZmlyc3RJbXBvcnRUZXh0LFxuICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgICAgIH0pO1xuICAgICAgICBkZXBvdFN0YXR1cy5zaG93U2Vjb25kTGlzdFRpcHMgPSBmYWxzZTtcbiAgICAgICAgd3JpdGVEZXBvdFN0YXR1c1RvRmlsZShkZXBvdFN0YXR1cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLm5vVGl0bGUgIT0gdHJ1ZSAmJiBzZXR0aW5ncy5oaWRlQWxsICE9IHRydWUpIHtcbiAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IFwi4oCY4oCY6L+Z6YeM5pivIFwiICsgYXV0aG9yICsgXCIg55qE6KeE5YiZ5bCP5LuT5bqT4oCZ4oCZXCIsXG4gICAgICAgICAgICAgICAgLy8gZGVzYzogXCLngrnlh7vlj6/orr/pl67op4TliJnku5PlupPmupBcIixcbiAgICAgICAgICAgICAgICAvLyB1cmw6IHJlbW90ZUhvbWUsXG4gICAgICAgICAgICAgICAgY29sX3R5cGU6IFwidGV4dF8xXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbW90ZVJ1bGVzID0gW107XG4gICAgICAgIC8vIHZhciByZW1vdGVVcmwgPSByZW1vdGVBcGlIb21lICsgZW5jb2RlVVJJQ29tcG9uZW50KGF1dGhvcikgKyBcIi9cIiArIHJlbW90ZUZpbGVuYW1lO1xuICAgICAgICB2YXIgcmVtb3RlU291cmNlID0gZmV0Y2gocmVtb3RlVXJsLCB7fSk7XG4gICAgICAgIC8vIHNldEVycm9yKHJlbW90ZVVybCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBldmFsKFwicmVtb3RlU291cmNlPVwiICsgcmVtb3RlU291cmNlKTtcbiAgICAgICAgICAgIGlmIChhcGlUeXBlID09IFwiMFwiKSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMgPSByZW1vdGVTb3VyY2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFwaVR5cGUgPT0gXCIxXCIpIHtcbiAgICAgICAgICAgICAgICBldmFsKFwicmVtb3RlUnVsZXM9XCIgKyBiYXNlNjREZWNvZGUocmVtb3RlU291cmNlLmNvbnRlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZW1vdGVSdWxlcy5kYXRhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm90aWNlID0gcmVtb3RlUnVsZXMubm90aWNlO1xuICAgICAgICAgICAgICAgIGlmIChub3RpY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChub3RpY2UpID09IFwic3RyaW5nXCIgJiYgbm90aWNlICE9IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5LuT5bqT6YCa55+lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzYzogbm90aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInBpY18xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAobm90aWNlKSA9PSBcIm9iamVjdFwiICYmIG5vdGljZS5kZXNjICE9IG51bGwgJiYgbm90aWNlLmRlc2MgIT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbm90aWNlLnRpdGxlICE9IG51bGwgJiYgbm90aWNlLnRpdGxlICE9IFwiXCIgPyBub3RpY2UudGl0bGUgOiBcIuS7k+W6k+mAmuefpVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IG5vdGljZS5kZXNjLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpY191cmw6IG5vdGljZS5waWNVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sX3R5cGU6IFwicGljXzFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMgPSByZW1vdGVSdWxlcy5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLm5vV2FybmluZyAhPSB0cnVlICYmIHNldHRpbmdzLmhpZGVBbGwgIT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuazqOaEj+S6i+mhuVwiLFxuICAgICAgICAgICAgICAgICAgICBkZXNjOiB3YXJpbmdUZXh0LFxuICAgICAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJwaWNfMVwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaGlrZXI6Ly9ob21lQOaAu+S7k+W6k1wiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgICAvL3NldEVycm9yKHJlbW90ZVJ1bGVzLmxlbmd0aCk7XG4gICAgICAgIGlmIChyZW1vdGVSdWxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9zZXRFcnJvcihteVJ1bGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBpZiAobXlSdWxlcy5sZW5ndGggPj0gcmVtb3RlUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgLy8g5LiN55+l6YGT5Lya5LiN5Lya5pyJ6Zeu6aKYXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBteVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhbFJ1bGUgPSBteVJ1bGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlbW90ZVJ1bGUgPSByZW1vdGVSdWxlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0hpZGVSdWxlKHJlbW90ZVJ1bGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNldElnbm9yZVVwZGF0ZVJ1bGUocmVtb3RlUnVsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNldHRpbmdzLnJ1bGVzTWFwcGluZy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKChsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUgIT0gbnVsbCkgfHwgcmVtb3RlUnVsZS5pc01hcHBlZCA9PSB0cnVlKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVNYXBwaW5nID0gc2V0dGluZ3MucnVsZXNNYXBwaW5nW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMF0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMV0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFqOWQjeaYoOWwhFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLnRpdGxlID09IGxvY2FsUnVsZU1hcHBpbmdUaXRsZSAmJiByZW1vdGVSdWxlLnRpdGxlID09IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUgJiYgcnVsZU1hcHBpbmdbMl0ubWF0Y2hBbGwgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGVSZWdleCA9IG5ldyBSZWdFeHAobG9jYWxSdWxlTWFwcGluZ1RpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPSBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSAhPSBcIlwiID8gbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA6IGxvY2FsUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUsIFwiZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubWFwcGluZ1RpdGxlID0gcmVtb3RlUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9PSByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5sb2NhbFRpdGxlID0gbG9jYWxSdWxlLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5pc01hcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm9sZFZlcnNpb24gPSBsb2NhbFJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFJ1bGUudGl0bGUgPT0gcmVtb3RlUnVsZS50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUub2xkVmVyc2lvbiA9IGxvY2FsUnVsZS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbal0ucnVsZT1teVJ1bGVzW2ldLnJ1bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdGVSdWxlc1tqXS5kZXNjPW15UnVsZXNbaV0uZGVzYztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlbW90ZVJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVSdWxlID0gcmVtb3RlUnVsZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaXNIaWRlUnVsZShyZW1vdGVSdWxlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldElnbm9yZVVwZGF0ZVJ1bGUocmVtb3RlUnVsZSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXlSdWxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsUnVsZSA9IG15UnVsZXNbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHNldHRpbmdzLnJ1bGVzTWFwcGluZy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKChsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgcmVtb3RlUnVsZS5tYXBwaW5nVGl0bGUgIT0gbnVsbCkgfHwgcmVtb3RlUnVsZS5pc01hcHBlZCA9PSB0cnVlKSBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bGVNYXBwaW5nID0gc2V0dGluZ3MucnVsZXNNYXBwaW5nW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYWxSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMF0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZW1vdGVSdWxlTWFwcGluZ1RpdGxlID0gcnVsZU1hcHBpbmdbMV0udGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFqOWQjeaYoOWwhFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLnRpdGxlID09IGxvY2FsUnVsZU1hcHBpbmdUaXRsZSAmJiByZW1vdGVSdWxlLnRpdGxlID09IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUgJiYgcnVsZU1hcHBpbmdbMl0ubWF0Y2hBbGwgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSA9IHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGl0bGVSZWdleCA9IG5ldyBSZWdFeHAobG9jYWxSdWxlTWFwcGluZ1RpdGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsUnVsZS5tYXBwaW5nVGl0bGUgPSBsb2NhbFJ1bGUubWFwcGluZ1RpdGxlICE9IG51bGwgJiYgbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSAhPSBcIlwiID8gbG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA6IGxvY2FsUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlUmVnZXggPSBuZXcgUmVnRXhwKHJlbW90ZVJ1bGVNYXBwaW5nVGl0bGUsIFwiZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGUubWFwcGluZ1RpdGxlID0gcmVtb3RlUnVsZS50aXRsZS5tYXRjaCh0aXRsZVJlZ2V4KVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxSdWxlLm1hcHBpbmdUaXRsZSA9PSByZW1vdGVSdWxlLm1hcHBpbmdUaXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5sb2NhbFRpdGxlID0gbG9jYWxSdWxlLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5pc01hcHBlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlLm9sZFZlcnNpb24gPSBsb2NhbFJ1bGUudmVyc2lvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsUnVsZS50aXRsZSA9PSByZW1vdGVSdWxlLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZS5vbGRWZXJzaW9uID0gbG9jYWxSdWxlLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdGVSdWxlc1tpXS5ydWxlPW15UnVsZXNbal0ucnVsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2ldLmRlc2M9bXlSdWxlc1tqXS5kZXNjO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG1lcmdlU29ydChhcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAobGVuIDwgMikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWlkZGxlID0gTWF0aC5mbG9vcihsZW4gLyAyKSxcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGFyci5zbGljZSgwLCBtaWRkbGUpLFxuICAgICAgICAgICAgICAgICAgICByaWdodCA9IGFyci5zbGljZShtaWRkbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXJnZShtZXJnZVNvcnQobGVmdCksIG1lcmdlU29ydChyaWdodCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBtZXJnZShsZWZ0LCByaWdodCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaWdub3JlVXBkYXRlTGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBpc1RoaXNWZXJzaW9uTGlzdCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxlZnQubGVuZ3RoID4gMCAmJiByaWdodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0WzBdLmlzSWdub3JlVXBkYXRlID09IHRydWUgJiYgbGVmdFswXS5vbGRWZXJzaW9uICE9IGxlZnRbMF0udmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlVXBkYXRlTGlzdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0uaXNJZ25vcmVVcGRhdGUgPT0gdHJ1ZSAmJiByaWdodFswXS5vbGRWZXJzaW9uICE9IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlnbm9yZVVwZGF0ZUxpc3QucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0WzBdLm9sZFZlcnNpb24gPCBsZWZ0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0ub2xkVmVyc2lvbiA8IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxlZnRbMF0ub2xkVmVyc2lvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJpZ2h0WzBdLm9sZFZlcnNpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmlnaHQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RoaXNWZXJzaW9uTGlzdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1RoaXNWZXJzaW9uTGlzdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGlnbm9yZVVwZGF0ZUxpc3QubGVuZ3RoKSByZXN1bHQucHVzaChpZ25vcmVVcGRhdGVMaXN0LnNoaWZ0KCkpO1xuXG4gICAgICAgICAgICAgICAgd2hpbGUgKGlzVGhpc1ZlcnNpb25MaXN0Lmxlbmd0aCkgcmVzdWx0LnB1c2goaXNUaGlzVmVyc2lvbkxpc3Quc2hpZnQoKSk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAobGVmdC5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAocmlnaHQubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJlbW90ZVJ1bGVzID0gbWVyZ2VTb3J0KHJlbW90ZVJ1bGVzKTtcblxuICAgICAgICAgICAgdmFyIHNob3dSdWxlTGlzdCA9IFtdO1xuICAgICAgICAgICAgLy8gc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkocmVtb3RlUnVsZXMpKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaiA9IHJlbW90ZVJ1bGVzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBydWxlV2l0aE1hcHBpbmcgPSBnZXRSdWxlSW5SdWxlc1dpdGhNYXBwaW5nKHJlbW90ZVJ1bGVzLCBqKTtcbiAgICAgICAgICAgICAgICBpZiAocnVsZVdpdGhNYXBwaW5nICE9IG51bGwgJiYgZ2V0UnVsZUluUnVsZXNXaXRoTWFwcGluZyhteVJ1bGVzLCBqKSkgaiA9IHJ1bGVXaXRoTWFwcGluZztcbiAgICAgICAgICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5uZWVkQ2hhbmdlU2hvd1R5cGUgPT0gdHJ1ZSAmJiBqLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBqLm9sZFZlcnNpb24gPj0gai52ZXJzaW9uICYmIHJlbW90ZVJ1bGVzLmxlbmd0aCA+IHNldHRpbmdzLnNob3dGdWxsVGV4dE1heClcbiAgICAgICAgICAgICAgICAgICAgci5jb2xfdHlwZSA9IHNldHRpbmdzLm92ZXJNYXhTaG93VHlwZTtcbiAgICAgICAgICAgICAgICBpZiAoKHNldHRpbmdzLm5vSWdub3JlVXBkYXRlICE9IHRydWUgJiYgai5pc0lnbm9yZVVwZGF0ZSA9PSB0cnVlKSAmJiAoai5vbGRWZXJzaW9uID09IG51bGwgfHwgai5vbGRWZXJzaW9uIDwgai52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBkZXBvdFJ1bGVzU3RhdHVzLmlnbm9yZU51bSArPSAxO1xuICAgICAgICAgICAgICAgICAgICByLmRlc2MgPSBcIuivpeinhOWImeW3suW/veeVpeacrOasoeabtOaWsFwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHIuZGVzYyA9IGRlc2MobXlSdWxlcywgaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHIudGl0bGUgPSBqLm1hcHBpbmdUaXRsZSAhPSBudWxsICYmIGoubWFwcGluZ1RpdGxlICE9IFwiXCIgJiYgai5pc01hcHBlZCA9PSB0cnVlID9cbiAgICAgICAgICAgICAgICAgICAgai5tYXBwaW5nVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgOiBqLnRpdGxlO1xuICAgICAgICAgICAgICAgIHIudXJsID0gai52ZXJzaW9uIDwgMCA/XG4gICAgICAgICAgICAgICAgICAgIGoucnVsZSB8fCBcIlwiXG4gICAgICAgICAgICAgICAgICAgIDogaXNJbkFycmF5KG15UnVsZXMsIGopIHx8IGouaXNNYXBwZWQgPT0gdHJ1ZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAoai5vbGRWZXJzaW9uICE9IG51bGwgJiYgai5vbGRWZXJzaW9uIDwgai52ZXJzaW9uID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoai5ydWxlIHx8IFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoXCJoaWtlcjovL2hvbWVAXCIgKyAoai5sb2NhbFRpdGxlICE9IG51bGwgJiYgai5sb2NhbFRpdGxlICE9IFwiXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqLmxvY2FsVGl0bGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBqLnRpdGxlKSkpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChqLnJ1bGUgfHwgXCJcIik7XG4gICAgICAgICAgICAgICAgLy9yLmNvbnRlbnQgPSBqLnVwZGF0ZVRleHQ7XG4gICAgICAgICAgICAgICAgc2hvd1J1bGVMaXN0LnB1c2gocik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5ub1J1bGVzTnVtICE9IHRydWUgJiYgc2V0dGluZ3MuaGlkZUFsbCAhPSB0cnVlKVxuICAgICAgICAgICAgICAgIGQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIjxiPuivpeS7k+W6k+WFseaciSDigJjigJhcIiArIHJlbW90ZVJ1bGVzLmxlbmd0aCArIFwi4oCZ4oCZIOadoeinhOWImTwvYj5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiAoXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCLmm7TmlrA64oCY4oCYXCIgKyBkZXBvdFJ1bGVzU3RhdHVzLnVwZGF0ZU51bVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIuKAmeKAmSAg5pyq5a+85YWlOuKAmOKAmFwiICsgZGVwb3RSdWxlc1N0YXR1cy5ub0ltcG9ydE51bVxuICAgICAgICAgICAgICAgICAgICAgICAgKyBcIuKAmeKAmSAg5b+955WlOuKAmOKAmFwiICsgZGVwb3RSdWxlc1N0YXR1cy5pZ25vcmVOdW1cbiAgICAgICAgICAgICAgICAgICAgICAgICsgXCLigJnigJkpXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbF90eXBlOiBcInRleHRfMVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB3aGlsZSAoc2hvd1J1bGVMaXN0Lmxlbmd0aCkgZC5wdXNoKHNob3dSdWxlTGlzdC5zaGlmdCgpKVxuXG4gICAgICAgIH1cbiAgICB9XG59XG5yZXMuZGF0YSA9IGQ7XG5zZXRIb21lUmVzdWx0KHJlcyk7Iiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IiJ9" 
}