{
    "title": "总仓库•V2",
    "author": "Reborn",
    "version": 1,
    "updateText": "二级列表版初版，二级列表的注意事项一定要看！",
    "rule": "rule://5rW36ZiU6KeG55WM6KeE5YiZ5YiG5Lqr77yM5b2T5YmN5YiG5Lqr55qE5piv77ya6aaW6aG16aKR6YGT77yMUmVib3Ju77+laG9tZV9ydWxl77+leyJmaXJzdEhlYWRlciI6ImNsYXNzIiwidGl0bGUiOiLmgLvku5PlupPigKJWMiIsImF1dGhvciI6IlJlYm9ybiIsInVybCI6Imhpa2VyOi8vaG9tZSIsInZlcnNpb24iOjAsImNvbF90eXBlIjoiaWNvbl8yIiwiY2xhc3NfbmFtZSI6IiIsImNsYXNzX3VybCI6IiIsImFyZWFfbmFtZSI6IiIsImFyZWFfdXJsIjoiIiwieWVhcl9uYW1lIjoiIiwieWVhcl91cmwiOiIiLCJmaW5kX3J1bGUiOiJqczpcbnZhciByZXMgPSB7fTtcbnZhciBkID0gW107XG5cbi8vIOWcqOi/memHjOa3u+WKoOS9nOiAheS7k+W6k+mFjee9rlxudmFyIGF1dGhvckxpc3QgPSBbXG4gICAgXCLlsI/mo4noooTwn4yeQEBxaXVzdW5zaGluZTIzM0BAaGlrZXJWaWV3XCIsXG4gICAgXCJSZWJvcm5AQFJlYm9ybl8wQEBIaWtlclJ1bGVzRGVwb3RcIixcbiAgICBcIlpydWlyeUBAenJ1aXJ5QEBoYWlrdW9cIixcbiAgICBcIkBMb3lEZ0lrQEBMb3lEZ0lrQEBMb3lEZ0lrX1J1bGVcIixcbiAgICBcIummmembheaDhUBAbHprMjM1NTlAQHB1YmxpY19mb2xkZXJcIlxuXTtcblxuLy8g5Zyo6L+Z6YeM5re75Yqg6ZqP5py65aS05YOPXG52YXIgcGljVXJsTGlzdCA9IFtcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2MjQmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2NDcmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNjY1MzYmc2l6ZT0xMjhcIixcblwiaHR0cHM6Ly93d3cuZWFzeWljb24ubmV0L2FwaS9yZXNpemVBcGkucGhwP2lkPTEyNzE2NTUmc2l6ZT0xMjhcIixcbl07XG5cbmQucHVzaCh7XG4gICAgdGl0bGU6IFwi5qyi6L+O5p2l5Yiw6KeG55WM5oC75LuT5bqTXCIsXG4gICAgZGVzYzogXCLlnKjov5nph4zvvIzkvaDlj6/ku6XnlYXmuLjlkITkuKrlpKfkvaznmoTop4TliJnvvIzlv6vpgJ/mtY/op4jlv6vpgJ/lr7zlhaVcIixcbiAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbn0pO1xuXG52YXIgZGVzYyA9IGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgIHJldHVybiBydWxlLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBydWxlLm9sZFZlcnNpb24gPCBydWxlLnZlcnNpb24gPyAoXCLigJjigJjmnInmlrDniYjmnKzvvJpcIiArIHJ1bGUudmVyc2lvbiArIFwi4oCZ4oCZ77yM54K55Ye75a+85YWl5paw54mI5pysXCIpIDogcnVsZS5vbGRWZXJzaW9uID4gcnVsZS52ZXJzaW9uID8gXCLigJjigJjllrXvvJ/kuLrllaXkvaDnmoTop4TliJnniYjmnKzmr5TmiJHov5jpq5jvvJ/igJnigJlcIiA6IFwi5b2T5YmN6KeE5YiZ5bey5piv5pyA5paw54mI77yM54K55Ye76Lez5Yiw6KeE5YiZ6aG1XCI7XG59O1xuXG4vLyDkuLrmiYDmnInliIbnsbvmt7vliqDmgLvku5PlupPpoblcbnRyeXtcbnZhciByZW1vdGVEZXBvdFJ1bGVVcmwgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL3FpdXN1bnNoaW5lMjMzL2hpa2VyVmlldy9yYXcvbWFzdGVyL3J1bGV2ZXJzaW9uL2RlcG90UnVsZV92Mi5qc29uXCJcbnZhciByZW1vdGVEZXBvdFJ1bGUgPSB7fTtcbmV2YWwoXCJyZW1vdGVEZXBvdFJ1bGU9XCIgKyBmZXRjaChyZW1vdGVEZXBvdFJ1bGVVcmwsIHt9KSk7XG52YXIgbG9jYWxEZXBvdFJ1bGUgPSBKU09OLnBhcnNlKGdldFJ1bGUoKSk7XG5yZW1vdGVEZXBvdFJ1bGUub2xkVmVyc2lvbiA9IGxvY2FsRGVwb3RSdWxlLnZlcnNpb247XG4vL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KGxvY2FsRGVwb3RSdWxlKSk7XG4vL3NldEVycm9yKEpTT04uc3RyaW5naWZ5KHJlbW90ZURlcG90UnVsZSkpO1xuaWYgKHJlbW90ZURlcG90UnVsZS5vbGRWZXJzaW9uIDwgcmVtb3RlRGVwb3RSdWxlLnZlcnNpb24pIHtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogcmVtb3RlRGVwb3RSdWxlLnRpdGxlICsgXCJcXHRcIiArIGRlc2MocmVtb3RlRGVwb3RSdWxlKSxcbiAgICAgICAgdXJsOiByZW1vdGVEZXBvdFJ1bGUucnVsZSB8fCBcIlwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCIsXG4gICAgICAgIC8vY29udGVudDogcmVtb3RlRGVwb3RSdWxlLnVwZGF0ZVRleHQsXG4gICAgICAgIGRlc2M6IFwi44CQ5pu05paw5pel5b+X44CRXFxuXCIgKyByZW1vdGVEZXBvdFJ1bGUudXBkYXRlVGV4dFxuICAgIH0pO1xufVxufSBjYXRjaCAoZSkge1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIuKAmOKAmOaAu+S7k+W6k+abtOaWsOeoi+W6j+W3suaNn+Wdj+KAmeKAmVwiLFxuICAgICAgICBkZXNjOiBcIuivt+iBlOezuyBSZWJvcm4g5L+u5aSNXCIsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIixcbiAgICB9KTtcbn1cblxuZm9yICh2YXIgaSA9IDA7IGkgPCBhdXRob3JMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBpY1VybCA9IGF1dGhvckxpc3RbaV0uc3BsaXQoXCJAQFwiKVszXTtcbiAgICBpZiAocGljVXJsID09IG51bGwpIHBpY1VybCA9IHBpY1VybExpc3RbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnBpY1VybExpc3QubGVuZ3RoKV07XG4gICAgLy8gc2V0RXJyb3IocGljVXJsKVxuICAgIGQucHVzaCh7XG4gICAgICAgICB0aXRsZTogYXV0aG9yTGlzdFtpXS5zcGxpdChcIkBAXCIpWzBdLFxuICAgICAgICAgdXJsOiBcImh0dHBzOi8vYmFpZHUuY29tI1wiICsgYXV0aG9yTGlzdFtpXSxcbiAgICAgICAgIHBpY191cmw6IHBpY1VybFxuICAgIH0pO1xufVxuXG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShkKSk7XG5yZXMuZGF0YSA9IGQ7XG5zZXRIb21lUmVzdWx0KHJlcyk7Iiwic2VhcmNoX3VybCI6IiIsInRpdGxlQ29sb3IiOiIjZmZmMjBjMDAiLCJncm91cCI6IiPvuI/ig6PpppbpobUiLCJzZWFyY2hGaW5kIjoiIiwiZGV0YWlsX2NvbF90eXBlIjoidGV4dF8xIiwiZGV0YWlsX2ZpbmRfcnVsZSI6ImpzOlxudmFyIHJlcyA9IHt9O1xudmFyIGQgPSBbXTtcblxuLy8g5YWl5oiP5byA5YWz77yf77yI5ruR56i977yJLy8g5Yig6Zmk5byA5YWz77yM5LiN6ZyA6KaB5Yig6Zmk6K+36K6+572u5Li6ZmFsc2VcbnZhciBuZWVkRGVsU3ltYm9sID0gdHJ1ZTtcbi8vIOiHquihjOa3u+WKoOimgeiiq+WIoOaOieeahOagh+iusFxudmFyIHN5bWJvbHMgPSBbXCLmoIforrAxXCIsXCLmoIforrAyXCJdO1xuXG4vLyDpmpDol4/lvIDlhbPvvIzkuI3pnIDopoHpmpDol4/or7forr7nva7kuLpmYWxzZVxudmFyIG5lZWRIaWRlUnVsZSA9IHRydWU7XG4vLyDoh6rooYzmt7vliqDopoHpmpDol4/nmoTmoIforrDvvIzmoLzlvI/kuLrvvJpb5qCH6K6w5ZCNXVxudmFyIGhpZGVTeW1ib2xzID0gW1wiW+aooeadv11cIiwgXCJb5pyq5a6M5oiQXVwiXTtcblxuLyoqXG4gKiDlj6/lnKjmraTlpIToh6rlrprkuYnku5PlupPvvIzlrp7njrDnp4Hkurrku5PlupNcbiAqXG4gKiDku6VSZWJvcm7ku5PlupPnmoTpk77mjqXkuLrlj4LogINcbiAqXG4gKiBodHRwczovL2dpdGVlLmNvbS9SZWJvcm5fMC9IaWtlclJ1bGVzRGVwb3QvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cbiAqL1xudmFyIGF1dGhvckFuZE93bmVyQW5kUHJvamVjdCA9IGdldFVybCgpLnNwbGl0KFwiI1wiKVsxXS5zcGxpdChcIkBAXCIpO1xudmFyIHJlbW90ZUFwaUhvbWUgPSBcImh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy9cIjtcbnZhciBvd25lciA9IGF1dGhvckFuZE93bmVyQW5kUHJvamVjdFsxXTsgICAvLyDku5PlupPmi6XmnInogIVcbnZhciByZXBvID0gYXV0aG9yQW5kT3duZXJBbmRQcm9qZWN0WzJdOyAvLyDku5PlupPlkI1cbnZhciBhdXRob3IgPSBhdXRob3JBbmRPd25lckFuZFByb2plY3RbMF07XG52YXIgcmVtb3RlRmlsZW5hbWUgPSBcInVwZGF0ZS5qc29uXCI7IC8vIOaWh+S7tuWQjVxudmFyIHBhdGggPSByZW1vdGVGaWxlbmFtZTsgIC8vIOWcqOS7k+W6k+S4reaWh+S7tueahOi3r+W+hFxudmFyIGFjY2Vzc190b2tlbiA9IFwiXCI7ICAvLyDnlKjmiLfmjojmnYPnoIHvvIzlnKjnoIHkupFcIuiuvue9ruKAlD7lronlhajorr7lrpotPuS4quS6uuiuv+mXruS7pOeJjFwi5Lit5Y+v5Lul55Sf5oiQXG5cbi8qKlxuICog77yB77yB77yB5bu66K6u5Zyo5q2k5aSE6YWN572u56eB5Lq65LuT5bqT77yB77yB77yBXG4gKlxuICog5Li65LqG5LiN5b2x5ZON5Y6f5LuT5bqT5Y+v5Lul5Zyo6L+Z6YeM6K6+572u6Ieq5bex55qE5LuT5bqT6YWN572u77yM5Li+5L6L77yaXG4gKlxuICog6ZO+5o6l5Y+C6ICD77yaaHR0cHM6Ly9naXRlZS5jb20vUmVib3JuXzAvSGlrZXJSdWxlc1ByaXZhY3kvYmxvYi9tYXN0ZXIvdXBkYXRlLmpzb25cbiAqL1xuLypcbm93bmVyID0gXCJSZWJvcm5fMFwiO1xucmVwbyA9IFwiSGlrZXJSdWxlc1ByaXZhY3lcIjtcbnBhdGggPSBcInVwZGF0ZS5qc29uXCI7XG5hY2Nlc3NfdG9rZW4gPSBcIioqKioqKioqKipcIjtcbi8vIGF1dGhvciA9IFwiUmVib3JuXCI7ICAvLyDoi6XmiYDmnInop4TliJlhdXRob3Lpg73mmK/lkIzkuIDkuKrliJnlnKjmraTlpITlm7rlrprkuIDkuKrljbPlj6/vvIznhLblkI7liIbnsbvlj6/ku6XmuIXnqbrvvIzms6jmhI/liKDpmaQgc3BsaXTvvIzkuI3nhLbkvJrmiqXplJnvvJvlkKbliJnor7fms6jmhI/loavlpb3liIbnsbvvvIzkuI3nhLbmsqHms5Xmo4DmtYvmm7TmlrBcbiovXG5cbi8vIEFQSemTvuaOpeWPguiAg++8mmh0dHBzOi8vZ2l0ZWUuY29tL2FwaS92NS9yZXBvcy97e293bmVyfX0ve3tyZXBvfX0vY29udGVudHMve3twYXRofX0/YWNjZXNzX3Rva2VuPSoqKipcbnZhciByZW1vdGVVcmwgPSByZW1vdGVBcGlIb21lICsgb3duZXIgKyBcIi9cIiArIHJlcG8gKyBcIi9jb250ZW50cy9cIiArIHBhdGg7XG5pZiAoYWNjZXNzX3Rva2VuICE9IFwiXCIpIHtcbiAgICByZW1vdGVVcmwgPSByZW1vdGVVcmwgKyBcIj9hY2Nlc3NfdG9rZW49XCIgK2FjY2Vzc190b2tlbjtcbn1cbi8vIHNldEVycm9yKHJlbW90ZVVybCk7XG5cbmQucHVzaCh7XG4gICAgdGl0bGU6IFwi4oCY4oCY6L+Z6YeM5pivIFwiICsgYXV0aG9yICsgXCIg55qE6KeE5YiZ5bCP5LuT5bqT4oCZ4oCZXCIsXG4gICAgY29sX3R5cGU6IFwidGV4dF8xXCJcbn0pO1xuXG5kLnB1c2goe1xuICAgIHRpdGxlOiBcIuazqOaEj+S6i+mhuVwiLFxuICAgIGRlc2M6IFwiMS4g5L+d5a2Y5ZCO6ZyA6KaB5omL5Yqo5LiL5ouJ5Yi35paw5omN6IO95pu05paw6KeE5YiZ54q25oCBXFxuMi4g54K55Ye76Lez5Yiw6KeE5YiZ6aG16ZyA6KaB6L+U5Zue5LiA57qn5YiX6KGo5omN6IO955Sf5pWIXFxuMy4g6Iul5piv5aSx6K+v54K55Ye76Lez6L2s5Y+v5Lul54K55Ye75rOo5oSP5LqL6aG55oGi5aSN5Yiw5LuT5bqT6aG1XCIsXG4gICAgY29sX3R5cGU6IFwicGljXzFcIixcbiAgICB1cmw6IFwiaGlrZXI6Ly9ob21lQOaAu+S7k+W6k+KAouS6jOe6p+inhOWImeeJiFwiXG59KTtcblxuZnVuY3Rpb24gZ2V0UnVsZU5vU3ltYm9scyhydWxlLCBzeW1ib2xMaXN0KSB7XG4gICAgaWYgKG5lZWREZWxTeW1ib2wgIT0gdHJ1ZSkgcmV0dXJuIHJ1bGU7XG4gICAgdmFyIHJ1bGVUZW1wID0gcnVsZTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgc3ltYm9sTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc3ltYm9sUmVnID0gbmV3IFJlZ0V4cChzeW1ib2xMaXN0W2ldLCBcImdcIik7XG4gICAgICAgIHJ1bGVUZW1wLnRpdGxlID0gcnVsZVRlbXAudGl0bGUucmVwbGFjZShzeW1ib2xSZWcsIFwiXCIpO1xuICAgIH1cbi8vc2V0RXJyb3IoSlNPTi5zdHJpbmdpZnkocnVsZVRlbXApKTtcbiAgICByZXR1cm4gcnVsZVRlbXA7XG59XG5cbmZ1bmN0aW9uIGlzSGlkZVJ1bGUgKHJ1bGUpIHtcbiAgICBpZiAobmVlZEhpZGVSdWxlICE9IHRydWUpIHJldHVybiBmYWxzZTtcbiAgICAvLyBpZiAoaGlkZVN5bWJvbHMubGVuZ3RoID09IDApIHJldHVybiBmYWxzZTtcbiAgICB2YXIgcnVsZVRlbXAgPSBydWxlO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBoaWRlU3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocnVsZVRlbXAudGl0bGUuaW5kZXhPZihoaWRlU3ltYm9sc1tpXSkgIT0gLTEpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBydWxlcyA9IFtdO1xuZXZhbChcInJ1bGVzPVwiICsgZmV0Y2goXCJoaWtlcjovL2hvbWVcIiwge30pKTtcbnZhciBteVJ1bGVzID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHJ1bGUgPSBydWxlc1tpXTtcbiAgICBpZiAocnVsZS5hdXRob3IgPT0gYXV0aG9yKSB7XG4gICAgICAgIG15UnVsZXMucHVzaChnZXRSdWxlTm9TeW1ib2xzKHJ1bGUsIHN5bWJvbHMpKTtcbiAgICB9XG59XG4vLyBzZXRFcnJvcihKU09OLnN0cmluZ2lmeShteVJ1bGVzKSk7XG5cbi8vIOWmguaenOacrOWcsOayoeacieWImeaPkOekuuWvvOWFpeaWsOinhOWImVxuLy8g5Zug6YOo5YiG5omL5py65LiN5pSv5oyBZXM26K+t5rOV77yM5pWF5rOo6YeK5o6JXG4vKnZhciBteVJ1bGVzTWFwID0gbmV3IE1hcCgpO1xubXlSdWxlcy5tYXAocnVsZT0+e1xubXlSdWxlc01hcC5zZXQocnVsZS50aXRsZSwgdHJ1ZSk7XG59KTtcbi8vc2V0RXJyb3IobXlSdWxlc01hcC5nZXQoXCLohb7orq/igKJSZVwiKSk7Ki9cbi8vIOWOn+Wni+aWueazle+8jOavlOi+g+iAl+aXtlxuZnVuY3Rpb24gaXNJbkFycmF5KHJ1bGVzLCB0aXRsZSkge1xuICAgIGlmIChydWxlcy5sZW5ndGggPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHJ1bGVzW2ldLnRpdGxlID09IHRpdGxlKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxudmFyIGRlc2MgPSBmdW5jdGlvbiAocnVsZXMsIHJ1bGUpIHtcbiAgICBpZiAoaXNJbkFycmF5KHJ1bGVzLCBydWxlLnRpdGxlKSA9PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBydWxlLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBydWxlLm9sZFZlcnNpb24gPCBydWxlLnZlcnNpb24gPyAoXCLigJjigJjmnInmlrDniYjmnKzvvJpcIiArIHJ1bGUudmVyc2lvbiArIFwi4oCZ4oCZ77yM54K55Ye75a+85YWl5paw54mI5pysXCIpIDogcnVsZS5vbGRWZXJzaW9uID4gcnVsZS52ZXJzaW9uID8gXCLigJjigJjllrXvvJ/kuLrllaXkvaDnmoTop4TliJnniYjmnKzmr5TmiJHov5jpq5jvvJ/igJnigJlcIiA6IFwi5b2T5YmN6KeE5YiZ5bey5piv5pyA5paw54mI77yM54K55Ye76Lez5Yiw6KeE5YiZ6aG1XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwi4oCY4oCY5L2g5bCa5pyq5a+85YWl6K+l6KeE5YiZ4oCZ4oCZ77yM54K55Ye75a+85YWlXCI7XG4gICAgfVxufTtcblxudmFyIHJlbW90ZVJ1bGVzID0gW107XG4vLyB2YXIgcmVtb3RlVXJsID0gcmVtb3RlQXBpSG9tZSArIGVuY29kZVVSSUNvbXBvbmVudChhdXRob3IpICsgXCIvXCIgKyByZW1vdGVGaWxlbmFtZTtcbnZhciByZW1vdGVTb3VyY2UgPSBmZXRjaChyZW1vdGVVcmwsIHt9KTtcbi8vIHNldEVycm9yKHJlbW90ZVVybCk7XG50cnkge1xuICAgIGV2YWwoXCJyZW1vdGVTb3VyY2U9XCIgKyByZW1vdGVTb3VyY2UpO1xuICAgIGV2YWwoXCJyZW1vdGVSdWxlcz1cIiArIGJhc2U2NERlY29kZShyZW1vdGVTb3VyY2UuY29udGVudCkpO1xufSBjYXRjaChlKSB7IH1cbi8vc2V0RXJyb3IocmVtb3RlUnVsZXMubGVuZ3RoKTtcbmlmIChyZW1vdGVSdWxlcy5sZW5ndGggPT0gMCkge1xuICAgIGQucHVzaCh7XG4gICAgICAgIHRpdGxlOiBcIuivpei/nOeoi+S7k+W6k+aXoOaVsOaNru+8gVwiLFxuICAgICAgICBjb2xfdHlwZTogXCJ0ZXh0X2NlbnRlcl8xXCJcbiAgICB9KTtcbiAgICBkLnB1c2goe1xuICAgICAgICB0aXRsZTogXCLor6Xov5znqIvku5PlupPml6DmlbDmja7vvIFcIixcbiAgICAgICAgY29sX3R5cGU6IFwidGV4dF9jZW50ZXJfMVwiXG4gICAgfSk7XG4gICAgZC5wdXNoKHtcbiAgICAgICAgdGl0bGU6IFwi6K+l6L+c56iL5LuT5bqT5peg5pWw5o2u77yBXCIsXG4gICAgICAgIGNvbF90eXBlOiBcInRleHRfY2VudGVyXzFcIlxuICAgIH0pO1xufSBlbHNlIHtcbiAgICAvL3NldEVycm9yKG15UnVsZXMubGVuZ3RoKTtcbiAgICBpZiAobXlSdWxlcy5sZW5ndGggPj0gcmVtb3RlUnVsZXMubGVuZ3RoKSB7XG4gICAgICAgIC8vIOS4jeefpemBk+S8muS4jeS8muaciemXrumimFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG15UnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNIaWRlUnVsZShyZW1vdGVSdWxlc1tqXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgICAgICAgICBqLS07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobXlSdWxlc1tpXS50aXRsZSA9PSByZW1vdGVSdWxlc1tqXS50aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdGVSdWxlc1tqXS5vbGRWZXJzaW9uID0gbXlSdWxlc1tpXS52ZXJzaW9uO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2pdLnJ1bGU9bXlSdWxlc1tpXS5ydWxlO1xuICAgICAgICAgICAgICAgICAgICAvL3JlbW90ZVJ1bGVzW2pdLmRlc2M9bXlSdWxlc1tpXS5kZXNjO1xuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVtb3RlUnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICgoaXNIaWRlUnVsZShyZW1vdGVSdWxlc1tpXSkpKSB7XG4gICAgICAgICAgICAgICAgcmVtb3RlUnVsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXlSdWxlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChteVJ1bGVzW2pdLnRpdGxlID09IHJlbW90ZVJ1bGVzW2ldLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZVJ1bGVzW2ldLm9sZFZlcnNpb24gPSBteVJ1bGVzW2pdLnZlcnNpb247XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbaV0ucnVsZT1teVJ1bGVzW2pdLnJ1bGU7XG4gICAgICAgICAgICAgICAgICAgIC8vcmVtb3RlUnVsZXNbaV0uZGVzYz1teVJ1bGVzW2pdLmRlc2M7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVyZ2VTb3J0KGFycikge1xuICAgICAgICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiA8IDIpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1pZGRsZSA9IE1hdGguZmxvb3IobGVuIC8gMiksXG4gICAgICAgICAgICBsZWZ0ID0gYXJyLnNsaWNlKDAsIG1pZGRsZSksXG4gICAgICAgICAgICByaWdodCA9IGFyci5zbGljZShtaWRkbGUpO1xuICAgICAgICByZXR1cm4gbWVyZ2UobWVyZ2VTb3J0KGxlZnQpLCBtZXJnZVNvcnQocmlnaHQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtZXJnZShsZWZ0LCByaWdodCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG5cbiAgICAgICAgd2hpbGUgKGxlZnQubGVuZ3RoID4gMCAmJiByaWdodC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAobGVmdFswXS5vbGRWZXJzaW9uIDwgbGVmdFswXS52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmlnaHRbMF0ub2xkVmVyc2lvbiA8IHJpZ2h0WzBdLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGVmdFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChsZWZ0LnNoaWZ0KCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyaWdodFswXS5vbGRWZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChyaWdodC5zaGlmdCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlIChsZWZ0Lmxlbmd0aClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxlZnQuc2hpZnQoKSk7XG5cbiAgICAgICAgd2hpbGUgKHJpZ2h0Lmxlbmd0aClcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHJpZ2h0LnNoaWZ0KCkpO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVtb3RlUnVsZXMgPSBtZXJnZVNvcnQocmVtb3RlUnVsZXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW1vdGVSdWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgaiA9IHJlbW90ZVJ1bGVzW2ldO1xuICAgICAgICB2YXIgciA9IHt9O1xuICAgICAgICByLmRlc2MgPSBkZXNjKG15UnVsZXMsIGopICsgKGoub2xkVmVyc2lvbiAhPSBudWxsICYmIGoub2xkVmVyc2lvbiA8IGoudmVyc2lvbiA/IChcIjxicj48YnI+W+abtOaWsOaXpeW/l10gXCIgKyggai51cGRhdGVUZXh0ID09bnVsbCA/IFwi5pegXCI6IGoudXBkYXRlVGV4dCkpIDogXCJcIik7XG4gICAgICAgIHIudGl0bGUgPSBqLnRpdGxlO1xuICAgICAgICByLnVybCA9ICBpc0luQXJyYXkobXlSdWxlcywgai50aXRsZSkgPyhqLm9sZFZlcnNpb24gIT0gbnVsbCAmJiBqLm9sZFZlcnNpb24gPCBqLnZlcnNpb24gPyAoai5ydWxlIHx8IFwiXCIpIDogKFwiaGlrZXI6Ly9ob21lQFwiK2oudGl0bGUpKTogIChqLnJ1bGUgfHwgXCJcIik7XG4gICAgICAgIC8vci5jb250ZW50ID0gai51cGRhdGVUZXh0O1xuICAgICAgICBkLnB1c2gocik7XG4gICAgfVxufVxuXG5yZXMuZGF0YSA9IGQ7XG5zZXRIb21lUmVzdWx0KHJlcyk7Iiwic2RldGFpbF9jb2xfdHlwZSI6Im1vdmllXzEiLCJzZGV0YWlsX2ZpbmRfcnVsZSI6IiJ9" 
}